{"version":3,"sources":["components/ErrorToast/index.js","redux/modules/app.js","containers/Home/components/Category.js","containers/Home/components/Headline.js","containers/Home/components/Discount.js","containers/Home/components/LikeItem.js","components/Loading/index.js","utils/throttle.js","containers/Home/components/LikeList.js","containers/Home/components/HomeHeader.js","components/Banner/index.js","containers/Home/components/Activity.js","components/Footer/index.js","utils/url.js","redux/modules/entities/products.js","utils/request.js","redux/middleware/api.js","redux/modules/home.js","containers/Home/index.js","containers/ProductDetail/components/ProductOverview.js","containers/ProductDetail/components/ShopInfo.js","containers/ProductDetail/components/Detail.js","containers/ProductDetail/components/Remark.js","containers/ProductDetail/components/BuyButton.js","components/Header/index.js","redux/modules/entities/shops.js","redux/modules/detail.js","containers/ProductDetail/index.js","containers/Search/components/SearchBox.js","containers/Search/components/PopularSearch.js","containers/Search/components/SearchHistory.js","redux/modules/entities/keywords.js","redux/modules/search.js","containers/Search/index.js","containers/SearchResult/components/ShopItem.js","containers/SearchResult/components/ShopList.js","containers/SearchResult/components/SearchHeader.js","containers/SearchResult/components/KeywordBox.js","containers/SearchResult/index.js","containers/Login/components/LoginHeader.js","containers/Login/components/LoginForm.js","redux/modules/login.js","containers/Login/index.js","containers/PrivateRoute/index.js","components/Tip/index.js","containers/Purchase/components/PurchaseForm.js","redux/modules/entities/orders.js","redux/modules/purchase.js","containers/Purchase/index.js","containers/User/components/UserHeader.js","containers/User/components/OrderItem.js","components/Confirm/index.js","redux/modules/entities/comments.js","redux/modules/user.js","containers/User/containers/UserMain.js","containers/User/index.js","containers/App/index.js","redux/modules/entities/index.js","redux/modules/index.js","redux/store.js","index.js"],"names":["ErrorToast","message","this","props","react_default","a","createElement","className","_this","timer","setTimeout","clearError","clearTimeout","Component","types","actions","type","initialState","error","getError","state","app","reducer","arguments","length","undefined","Object","objectSpread","dataSource","name","src","Category","lib_default","dots","arrows","slidesToShow","swipeToSlide","autoplay","map","section","index","key","item","i","pic","title","url","Headline","vertical","href","Discount","data","react_router_dom","to","concat","id","picture","width","height","product","currentPrice","oldPrice","LikeItem","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","_this$props$data","shop","tag","saleDesc","Loading","throttle","func","delay","console","log","Likelist","call","throttleFetchLikes","fetchLikes","myRef","React","createRef","handleScroll","bind","assertThisInitialized","removeListener","_this$props","pageCount","ref","Home_components_LikeItem","src_components_Loading","document","addEventListener","removeEventListener","scrollTop","documentElement","body","clientHeight","current","offsetTop","offsetHeight","HomeHeader","Banner","style","dark","backgroundImage","Activity","Footer","utils_url","path","rowIndex","pageSize","text","schema","getProductDetail","entities","products","detail","purchaseNotes","action","response","headers","Headers","Accept","Content-Type","handleResponse","status","json","Promise","reject","fetchData","endpoint","fetch","method","then","catch","normalize","_ref","ids","kvObj","Array","isArray","forEach","push","defineProperty","actionTypes","params","loadLikes","dispatch","getState","home","likes","loadDiscounts","discounts","fetchDiscounts","isFetching","getLikes","getDiscounts","getPageCountOfLikes","combineReducers","Home","homeActions","Home_components_HomeHeader","src_components_Banner","Home_components_Category","Home_components_Headline","Home_components_Activity","Home_components_Discount","components_LikeList","src_components_Footer","connect","bindActionCreators","ProductOverview","description","alt","ShopInfo","total","address","phone","Detail","_this$props$data$deta","category","remark","cellPadding","cellSpacing","colSpan","quantity","price","Remark","validityPeriod","content","BuyButton","productId","Header","grey","onBack","backgroundColor","onClick","getShopById","shops","relatedShop","loadProductDetail","fetchProductDetailSuccess","fetchProductDetail","loadRelatedShop","fetchShopSuccess","fetchShop","productSchema","_ref2","shopSchema","getProduct","getRelatedShop","getProductById","shopId","nearestShop","ProductDetail","history","goBack","src_components_Header","ProductDetail_components_ProductOverview","ProductDetail_components_ShopInfo","shopIds","ProductDetail_components_Detail","ProductDetail_components_Remark","ProductDetail_components_BuyButton","detailActions","match","preProps","SearchBox","onChange","e","target","value","onClear","onClickItem","onCancel","renderSuggestList","_this2","relatedKeywords","keyword","PopularSearch","popularKeywords","SearchHistory","keywords","inputText","historyKeywords","searchedShopsByKeyword","loadPopularKeywords","search","fetchPopularKeywords","loadRelatedKeywords","relatedKeyword","fetchRelatedKeywords","setInputText","clearInputText","addHistoryKeyword","clearHistoryKeywords","loadRelatedShops","fetchRelatedShops","shopsSchema","keywordSchema","_ref3","searchedShops","relatedKeywordsByText","filter","toConsumableArray","getInputText","getPopularKeywords","getRelatedKeywords","trim","getHistoryKeywords","getSearchedShops","keywordId","getCurrentKeyword","Search","componentDidMount","searchActions","onClearInput","onChangeInput","onClearHistory","Search_components_SearchBox","Search_components_PopularSearch","Search_components_SearchHistory","ShopItem","star","region","ShopList","SearchResult_components_ShopItem","SearchHeader","onSearch","KeywordBox","SearchResult","handleBack","handleSearch","currentKeyword","SearchResult_components_SearchHeader","SearchResult_components_KeywordBox","SearchResult_components_ShopList","LoginHeader","LoginForm","username","password","onSubmit","localStorage","getItem","login","_getState$login","loginRequest","resolve","loginSuccess","setItem","loginFailure","logout","removeItem","setUsername","setPassword","getUsername","getPassword","isLogin","Login","handleChange","loginActions","handleSumbit","react_router","Login_components_LoginHeader","Login_components_LoginForm","PrivateRoute","component","rest","objectWithoutProperties","assign","render","pathname","from","location","Tip","PurchaseForm","showTip","onCounterDec","onCounterInc","onSetQuantity","orders","DELETE_ORDER","_action$orderId","orderId","_toPropertyKey","ADD_COMMENT","commentId","ADD_ORDER","order","orderIdCounter","setOrderQuantity","hideTip","submitOrder","submitOrderRequest","purchase","totalPrice","text1","text2","orderPicUrl","channel","statusText","orderActions","submitOrderSuccess","getShowTip","getQuantity","Purchase","handleTipClick","purchaseActions","handleCounterDec","handleCounterInc","handleSetQuantity","handleSubmit","componentWillUnmount","Purchase_components_PurchaseForm","src_components_Tip","UserHeader","handleClickBack","handleClickLogout","onLogout","OrderItem","renderEditArea","comment","onCancelComment","onSubmitComment","handleCommentChange","renderStar","_this$props2","stars","onStarsChange","lightClass","handleStarsChange","onCommentChange","isCommenting","_this$props3","onRemove","onComment","Confirm","cancelText","confirmText","onConfirm","commentObj","typeToKey","_typeToKey","toPayIds","availableIds","refundIds","currentTab","currentOrder","isDeleting","loadOrders","user","fetchOrders","setCurrentTab","showDeleteDialog","removeOrders","deleteOrderRequest","deleteOrderSuccess","hideDeleteDialog","showCommentArea","hideCommentArea","setComment","setStars","submitComment","postCommentRequest","_getState$user$curren","Date","postCommentSuccess","commentActions","removeOrderId","availabelIds","orderTypes","getOrders","getOrderById","getCurrentTab","getIsDeleting","getCommentingOrderId","getStars","getComment","tabTitles","UserMain","renderConfirmDialog","_this$props$userActio","userActions","src_components_Confirm","handleClickTab","renderOrderList","commentingOrderId","_this$props$userActio2","User_components_OrderItem","renderEmpty","User","handleSetCurrentTab","handleLogout","User_components_UserHeader","User_containers_UserMain","App","appActions","containers_PrivateRoute","components_ErrorToast","msg","comments","rootReducer","store","createStore","applyMiddleware","thunk","next","_action$FETCH_DATA","Error","every","actionWith","finalAction","_types","slicedToArray","request","success","failure","ReactDOM","es","src_containers_App","getElementById"],"mappings":"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","file":"static/js/main.45d16dd2.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass ErrorToast extends Component {\r\n\r\n    render() {\r\n        const { message } = this.props;\r\n        return (\r\n            <div className=\"errorToast\">\r\n                <div className=\"errorToast_text\" >\r\n                    {message}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.timer = setTimeout(() => {\r\n            this.props.clearError();\r\n        }, 3000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.timer) {\r\n            clearTimeout(this.timer);\r\n        }\r\n    }\r\n}\r\nexport default ErrorToast;\r\n","//定义actionType\r\n\r\nconst types = {\r\n    CLEAR_ERROR: 'APP/CLEAR_ERROR'\r\n}\r\n\r\n//定义action\r\nexport const actions = {\r\n    clearError: () => ({\r\n        type: types.CLEAR_ERROR\r\n    })\r\n}\r\n\r\nconst initialState = {\r\n    error: null\r\n}\r\nconst reducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case 'APP/CLEAR_ERROR': {\r\n            return {...state, error: null}\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n//定义selector\r\nexport const getError = (state) => {\r\n    return state.app.error;\r\n}\r\nexport default reducer;\r\n","import React, { Component } from \"react\";\r\nimport Slider from \"react-slick\";\r\nimport './Category.css'\r\n\r\nconst dataSource = [\r\n  [\r\n    {\r\n      name: \"猫眼电影\",\r\n      src:\r\n        \"https://www.dpfile.com/sc/eleconfig/20170223152109dp_wx_maoyan_icon.png\"\r\n    },\r\n    {\r\n      name: \"酒店\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126203337jiudian.png\"\r\n    },\r\n    {\r\n      name: \"休闲娱乐\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126202841xiuxianyule.png\"\r\n    },\r\n    {\r\n      name: \"外卖\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126203251waimai.png\"\r\n    },\r\n    {\r\n      name: \"火锅\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160204172927huoguo.png\"\r\n    },\r\n    {\r\n      name: \"美食\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126194705meishi.png\"\r\n    },\r\n    {\r\n      name: \"丽人\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126202946liren.png\"\r\n    },\r\n    {\r\n      name: \"休闲娱乐\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126203542ktv.png\"\r\n    },\r\n    {\r\n      name: \"KTV\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126203440zhoubianyou.png\"\r\n    },\r\n    {\r\n      name: \"婚纱摄影\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126203830jiehun.png\"\r\n    }\r\n  ],\r\n  [\r\n    {\r\n      name: \"生活服务\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20170308125500community_new.png\"\r\n    },\r\n    {\r\n      name: \"景点\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126205135jingguan.png\"\r\n    },\r\n    {\r\n      name: \"爱车\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126203742aiche.png\"\r\n    },\r\n    {\r\n      name: \"运动健身\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126203617jianshen.png\"\r\n    },\r\n    {\r\n      name: \"购物\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160314121215icongouwu135.png\"\r\n    },\r\n    {\r\n      name: \"亲子\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126203905qinzi.png\"\r\n    },\r\n    {\r\n      name: \"到家\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126203812daojia.png\"\r\n    },\r\n    {\r\n      name: \"家装\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20161213162031zhuangxiu.png\"\r\n    },\r\n    {\r\n      name: \"学习培训\",\r\n      src: \"https://www.dpfile.com/gp/cms/1455525720807.png\"\r\n    },\r\n    {\r\n      name: \"医疗健康\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160126204327yiliao.png\"\r\n    }\r\n  ],\r\n  [\r\n    {\r\n      name: \"小吃快餐\",\r\n      src:\r\n        \"https://www.dpfile.com/sc/eleconfig/20160204173331xiaochikuaican.png\"\r\n    },\r\n    {\r\n      name: \"自助餐\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160204173511zizhucan.png\"\r\n    },\r\n    {\r\n      name: \"日本菜\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160415121719rihanliaoli.png\"\r\n    },\r\n    {\r\n      name: \"美发\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160316142804meifa.png\"\r\n    },\r\n    {\r\n      name: \"美甲美瞳\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160316143047meijia.png\"\r\n    },\r\n    {\r\n      name: \"美容SPA\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160316143239meirong.png\"\r\n    },\r\n    {\r\n      name: \"瘦身\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160316143316shoushen.png\"\r\n    },\r\n    {\r\n      name: \"亲子摄影\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160316143612qinzisheying.png\"\r\n    },\r\n    {\r\n      name: \"亲子娱乐\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160316143656qinziyoule.png\"\r\n    },\r\n    {\r\n      name: \"全部分类\",\r\n      src: \"https://www.dpfile.com/sc/eleconfig/20160125182200more.png\"\r\n    }\r\n  ]\r\n];\r\n\r\nclass Category extends Component {\r\n  render() {\r\n    const settings = {\r\n      dots: true,\r\n      arrows: false,\r\n      slidesToShow: 1,\r\n      swipeToSlide: true,\r\n      autoplay: true\r\n    };\r\n\r\n    return (\r\n      <div className=\"category\">\r\n        <Slider {...settings}>\r\n          {dataSource.map((section, index) => {\r\n            return (\r\n              <div key={index}>\r\n                {section.map((item, i) => {\r\n                  return (\r\n                    <div className=\"category__section\" key={i}>\r\n                      <img className=\"category__icon\" src={item.src} />\r\n                      <div>\r\n                        <span className=\"category__text\">{item.name}</span>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            );\r\n          })}\r\n        </Slider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Category;\r\n","import React, { Component } from 'react';\r\nimport Slider from 'react-slick';\r\nimport './Headline.css'\r\nconst dataSource = [\r\n  {\r\n    pic:\r\n      \"https://p1.meituan.net/gpa/5ee6d6d00d942804557c73abff79b855116489.jpg%40100w_100h_1e_1c_1l%7Cwatermark%3D1%26%26r%3D1%26p%3D9%26x%3D20%26y%3D20\",\r\n    title: \"精选专题：2017好物盘点\",\r\n    url:\r\n      \"https://h5.dianping.com/app/h5-ranklist-static/list_nearby.html?collectionId=227&source=weixinM\"\r\n  },\r\n  {\r\n    pic:\r\n      \"https://p0.meituan.net/gpa/387438cef7e2bb9eff5b701dde173f27268549.png%40100w_100h_1e_1c_1l%7Cwatermark%3D1%26%26r%3D1%26p%3D9%26x%3D20%26y%3D20\",\r\n    title: \"不比出国差，短假期选这些地方玩！当天都来得及去哦～\",\r\n    url:\r\n      \"https://h5.dianping.com/app/h5-ranklist-static/list_nearby.html?headlineId=394055&source=weixinM\"\r\n  },\r\n  {\r\n    pic:\r\n      \"https://p1.meituan.net/gpa/fbd325713d43366810452c38fc0e32e1945185.png%40100w_100h_1e_1c_1l%7Cwatermark%3D1%26%26r%3D1%26p%3D9%26x%3D20%26y%3D20\",\r\n    title: \"吓到腿软！12条恐怖玻璃栈道，敢去吗？\",\r\n    url:\r\n      \"https://h5.dianping.com/app/h5-ranklist-static/list_nearby.html?headlineId=484549&source=weixinM\"\r\n  }\r\n];\r\n\r\nclass Headline extends Component {\r\n\r\n    render() {\r\n        const settings = {\r\n            slidesToShow: 1,\r\n            swipeToSlide: true,\r\n            autoplay: true,\r\n            vertical: true\r\n        };\r\n        return (\r\n            <div className=\"headline\">\r\n                <div className=\"headline__logo\">\r\n                </div>\r\n                <div className=\"headline__slider\">\r\n                    <Slider {...settings}>\r\n                        {dataSource.map((item, index) => {\r\n                            return <a key={index} href={item.url} className=\"headline__sliderInner\">\r\n                                <div className=\"headline__sliderTitle\">{item.title}</div>\r\n                                <div className=\"headline__sliderImgWrapper\">\r\n                                    <img className=\"headline__sliderImg\" src={item.pic} />\r\n                                </div>\r\n                            </a>\r\n                        })}\r\n                    </Slider>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Headline;\r\n","import React, { Component } from 'react';\r\nimport './Discount.css';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Discount extends Component {\r\n\r\n    render() {\r\n        const data = this.props.data;\r\n        return (\r\n            <div className=\"discount\">\r\n                <div className=\"discount__header\">\r\n                    <a>\r\n                        <span className=\"discount__title\">超值特惠</span>\r\n                        <span className=\"discount__more\">更多优惠</span>\r\n                        <span className=\"discount__arrow\"></span>\r\n                    </a>\r\n                </div>\r\n                <div className=\"discount__content\">\r\n                    {data.map((item, index) => {\r\n                        return (\r\n                            <Link to={`/detail/${item.id}`} key={item.id} className=\"discount__item\">\r\n                                <div className=\"discount__itemPic\">\r\n                                    <img src={item.picture} width=\"100%\" height=\"100%\"/>\r\n                                </div>\r\n                                <div className=\"discount__itemTitle\">{item.product}</div>\r\n                                <div className=\"discount__itemPriceWrapper\">\r\n                                    <ins className=\"discount__itemCurrentPrice\">{item.currentPrice}</ins>\r\n                                    <del className=\"discount__itemOldPrice\">{item.oldPrice}</del>\r\n                                </div>\r\n                            </Link>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Discount;\r\n","import React, { Component } from 'react';\r\nimport './LikeItem.css';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nclass LikeItem extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            id,\r\n            shop,\r\n            tag,\r\n            picture,\r\n            product,\r\n            currentPrice,\r\n            oldPrice,\r\n            saleDesc\r\n        } = this.props.data;\r\n        return (\r\n            <Link to={`/detail/${id}`} className=\"likeItem\">\r\n                <div className=\"likeItem__picContainer\">\r\n                    <div className=\"likeItem__picTag\">{tag}</div>\r\n                    <img className=\"likeItem__pic\" src={picture}/>\r\n                </div>\r\n                <div className=\"likeItem__content\">\r\n                    <div className=\"likeItem__shop\">{shop}</div>\r\n                    <div className=\"likeItem__product\">{product}</div>\r\n                    <div className=\"likeItem__detail\">\r\n                        <div className=\"likeItem__price\">\r\n                            <div className=\"likeItem__currentPrice\">{currentPrice}</div>\r\n                            <div className=\"likeItem__oldPrice\">{oldPrice}</div>\r\n                        </div>\r\n                        <div className=\"likeItem__sale\">{saleDesc}</div>\r\n                    </div>\r\n                </div>\r\n            </Link>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LikeItem;\r\n","import React, { Component } from 'react';\r\nimport \"./index.css\"\r\n\r\nclass Loading extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"loading\">\r\n        <div className=\"loading__img\"/>\r\n        <span>正在加载...</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Loading;\r\n","\r\nconst throttle = (func, delay = 500) => {\r\n    let timer = null;\r\n    return () => {\r\n        if (!timer) {\r\n            timer = setTimeout(() => {\r\n                console.log('get in timeout')\r\n                func();\r\n                clearTimeout(timer);\r\n                timer = null;\r\n            }, delay)\r\n        };\r\n    };\r\n}\r\n\r\nexport default throttle;\r\n","import React, { Component } from 'react';\r\nimport LikeItem from './LikeItem.js';\r\nimport Loading from '../../../components/Loading';\r\nimport throttle from '../../../utils/throttle.js';\r\nimport './LikeList.css';\r\n\r\n\r\nclass Likelist extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // this.throttleFetchLikes = throttle(this.props.fetchLikes);\r\n        this.myRef = React.createRef();\r\n        this.handleScroll = this.handleScroll.bind(this);\r\n        this.removeListener = false;\r\n    }\r\n\r\n    render() {\r\n        const { data, pageCount } = this.props;\r\n        return (\r\n            <div className=\"likeList\" ref={this.myRef}>\r\n                <div className=\"likeList__header\">猜你喜欢</div>\r\n                <div className=\"likeList__list\">\r\n                    {data.map((item, index) => {\r\n                        return <LikeItem key={index} data={item} />\r\n                    })}\r\n                </div>\r\n                <div className=\"\">\r\n                    {pageCount < 3 ? <Loading /> : (<div className=\"likeList__viewAll\">查看更多</div>)}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    componentDidMount() {\r\n        // console.log('componentDidMount');\r\n        if (this.props.pageCount < 3) {\r\n            document.addEventListener('scroll', this.handleScroll);\r\n        } else {\r\n            this.removeListener = true;\r\n        }\r\n        if (this.props.pageCount === 0) {\r\n            this.props.fetchLikes();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.pageCount >= 3) {\r\n            document.removeEventListener('scroll', this.handleScroll);\r\n            this.removeListener = true;\r\n        };\r\n    }\r\n    componentWillUnmount() {\r\n        if (!this.removeListener) {\r\n            document.removeEventListener('scroll', this.handleScroll);\r\n        };\r\n    }\r\n\r\n    throttleFetchLikes = throttle(this.props.fetchLikes);\r\n\r\n    handleScroll() {\r\n        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\r\n        const clientHeight = document.documentElement.clientHeight;\r\n        const likeListTop = this.myRef.current.offsetTop;\r\n        const likeListHeight = this.myRef.current.offsetHeight;\r\n        if (scrollTop >= likeListTop + likeListHeight - clientHeight - 10 && this.props.pageCount < 3) {\r\n            this.throttleFetchLikes()\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Likelist;\r\n","import React, { Component } from 'react';\r\nimport \"./HomeHeader.css\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass HomeHeader extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"homeHeader\">\r\n        <header className=\"homeHeader__wrapper\">\r\n          <a className=\"homeHeader__city\">北京</a>\r\n          <Link to=\"/search\" className=\"homeHeader__search\">输入商户名、地点</Link>\r\n          <Link to=\"/user\" className=\"homeHeader__self\">\r\n            <div className=\"homeHeader__portrait\"/>\r\n        </Link>\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HomeHeader;\r\n","import React, { Component } from 'react'\r\nimport './index.css'\r\n\r\nclass Banner extends Component {\r\n  render () {\r\n    const { dark } =  this.props;\r\n    const style = dark ? {backgroundImage: 'url(https://www.dpfile.com/app/node-mobile-m-isomorphism-web/static/ee72da6bea423a71f81c4e0be8a1dcf7.png)'} : null;\r\n    return (\r\n      <header className='banner' style={style}>\r\n        <div className='banner__title'>\r\n          <span className='banner__logo'/>\r\n          <span className='banner__text'>吃喝玩乐，找优惠</span>\r\n        </div>\r\n        <div className='banner__btns'>\r\n          <a className='banner__btn' href='https://evt.dianping.com/synthesislink/6702.html'>打开大众点评</a>\r\n          <a className='banner__btn banner__btn--bg' href='https://m.dianping.com/download/redirect?id=11186'>下载APP享特价</a>\r\n        </div>\r\n      </header>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Banner\r\n","import React, { Component } from \"react\";\r\nimport \"./Activity.css\";\r\n\r\nclass Activity extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"activity\">\r\n        <div className=\"activity__block\">\r\n          <a\r\n            className=\"activity__content activity__content--pink\"\r\n            href=\"https://h5.dianping.com/app/ziggurat/1005/index.html?activity_tlt=1005&infrom=mzone\"\r\n          >\r\n            <div className=\"activity__title\">最高88元</div>\r\n            <div className=\"activity__subTitle activity__subTitle--pink\">\r\n              速领新人红包\r\n            </div>\r\n            <img\r\n              className=\"activity__pic\"\r\n              src=\"https://op.meituan.net/oppkit_pic/20160310032241-1e027deb-2/a3a31fff2e047a907a53d6488877f7fe.png\"\r\n            />\r\n          </a>\r\n        </div>\r\n        <div className=\"activity__block\">\r\n          <a\r\n            className=\"activity__content activity__content--blue\"\r\n            href=\"//h5.dianping.com/app/ziggurat/1361/index.html?notitlebar=1&token=*&latitude=*&longitude=*&activity_tlt=1361&infrom=mzone\"\r\n          >\r\n            <div className=\"activity__title\">品质福利放送</div>\r\n            <div className=\"activity__subTitle activity__subTitle--blue\">\r\n              享吃喝玩乐礼\r\n            </div>\r\n            <img\r\n              className=\"activity__pic\"\r\n              src=\"https://op.meituan.net/oppkit_pic/20160310032241-1e027deb-2/a9b8c52c341892600ff7260c89025a59.png\"\r\n            />\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Activity;\r\n","import React, { Component } from 'react'\r\nimport './index.css'\r\n\r\nclass Footer extends Component {\r\n  render () {\r\n    return (\r\n      <footer className='footer'>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          我的\r\n        </a>\r\n        <em className=\"footer__seperator\">|</em>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          社区论坛\r\n        </a>\r\n        <em className=\"footer__seperator\">|</em>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          添加商户\r\n        </a>\r\n        <em className=\"footer__seperator\">|</em>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          意见反馈\r\n        </a>\r\n        <br/>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          美团网\r\n        </a>\r\n        <em className=\"footer__seperator\">|</em>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          美团下载\r\n        </a>\r\n        <em className=\"footer__seperator\">|</em>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          结婚\r\n        </a>\r\n        <em className=\"footer__seperator\">|</em>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          亲子\r\n        </a>\r\n        <em className=\"footer__seperator\">|</em>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          家装\r\n        </a>\r\n        <em className=\"footer__seperator\">|</em>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          宴会\r\n        </a>\r\n        <em className=\"footer__seperator\">|</em>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          教育\r\n        </a>\r\n        <br/>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          电脑版\r\n        </a>\r\n        <em className=\"footer__seperator\">|</em>\r\n        <a className='footer__link' href=\"https://m.dianping.com/nmy/myinfo\">\r\n          客户端\r\n        </a>\r\n        <em className=\"footer__seperator\">|</em>\r\n        <br/>\r\n        <p className=\"footer__copyright\">copyright ©2018 dianping.com</p>\r\n      </footer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Footer\r\n","export default {\r\n  getProductList: (path, rowIndex, pageSize) => `/mock/products/${path}.json?rowIndex=${rowIndex}&pageSize=${pageSize}`,\r\n  getProductDetail: (id) => `/mock/product_detail/${id}.json`,\r\n  getShop: (id) => `/mock/shops/${id}.json`,\r\n  getPopularKeywords: () => (`/mock/keywords/popular.json`),\r\n  getRelatedKeywords: (text) => (`/mock/keywords/related.json?keywords=${text}`),\r\n  getSearchedShops: (text) => (`/mock/shops/related.json?keyword=${text}`),\r\n  getOrders: () => (`/mock/orders/orders.json`)\r\n}\r\n","export const schema = {\r\n    name: 'products',\r\n    id: 'id'\r\n}\r\n\r\nconst reducer = (state = {}, action) => {\r\n    if (action.response && action.response[schema.name]) {\r\n        return {\r\n            ...state,\r\n            ...action.response.products\r\n        }\r\n    }\r\n    return state;\r\n};\r\n\r\nexport const getProductById = (state, id) => {\r\n    return state.entities.products[id]\r\n}\r\n\r\nexport const getProductDetail = (state, id) => {\r\n    const product = state.entities.products[id];\r\n    return product && product.detail && product.purchaseNotes ? product :  null;\r\n}\r\n\r\nexport default reducer;\r\n","\r\nconst headers = new Headers({\r\n    'Accept': 'application/json',\r\n    'Content-Type': 'application/json'\r\n});\r\nexport const get = (url) => {\r\n    return fetch(url, {\r\n        method: 'get',\r\n        headers: headers\r\n    }).then(response => {\r\n        return handleResponse(url, response);\r\n    }).catch(error => {\r\n        console.log(`request fail in reach ${url} + ${error}`);\r\n        return Promise.reject({error: {message: 'request failed'}});\r\n    })\r\n};\r\n\r\nexport const post = (url, data) => {\r\n    fetch(url, {\r\n        method: 'post',\r\n        headers: headers,\r\n        body: data\r\n    }).then(response => {\r\n        return handleResponse(url, response);\r\n    }).catch(error => {\r\n        console.log(`request fail in reach ${url} + ${error}`);\r\n        return Promise.reject({error: {message: 'request failed'}});\r\n    })\r\n};\r\n\r\nconst handleResponse = (url, response) => {\r\n    if (response.status === 200) {\r\n        return response.json();\r\n    }\r\n    console.log(`fail getting data ${url}`);\r\n    return Promise.reject({error: {message: 'request failed'}});\r\n}\r\n","import { get } from '../../utils/request.js';\r\n\r\nexport const FETCH_DATA = 'FETCH_DATA';\r\n\r\nexport default store => next => action => {\r\n    if (action[FETCH_DATA] === undefined) {\r\n        return next(action);\r\n    }\r\n\r\n    const { types, schema, endpoint } = action[FETCH_DATA];\r\n    if (typeof endpoint !== 'string' ) {\r\n        throw new Error('endpoint必须为字符串类型的URL');\r\n    }\r\n    if (!schema) {\r\n        throw new Error('必须指定schema');\r\n    }\r\n    if (!Array.isArray(types) || types.length !== 3) {\r\n        throw new Error('必须指定数组types且长度为3');\r\n    }\r\n    if(!types.every(type => typeof type === 'string')) {\r\n      throw new Error('action type必须为字符串类型');\r\n    }\r\n\r\n    const actionWith = (data) => {\r\n        const finalAction = {...action, ...data}\r\n        delete finalAction[FETCH_DATA]\r\n        return finalAction\r\n    }\r\n\r\n    const [ request, success, failure ] = types;\r\n    console.log('dispatch request')\r\n    next(actionWith({type: request}));\r\n    return fetchData(endpoint, schema).then(response => {\r\n        console.log('dispatch success')\r\n        next(actionWith({\r\n            type: success,\r\n            response\r\n        }))\r\n    }).catch(error => {\r\n        next(actionWith({\r\n            type: failure,\r\n            error: error.message || '获取数据失败'\r\n        }))\r\n    })\r\n}\r\n\r\nconst fetchData = (endpoint, schema) => {\r\n    return get(endpoint).then(data => {\r\n        return normalize(data, schema);\r\n    });\r\n};\r\n\r\nconst normalize = (data, schema) => {\r\n    const { id, name } = schema;\r\n    let ids = [];\r\n    let kvObj = {};\r\n    if (Array.isArray(data)) {\r\n        data.forEach(item => {\r\n            ids.push(item[id]);\r\n            kvObj[item[id]] = item;\r\n        })\r\n    } else {\r\n        ids.push(data[id]);\r\n        kvObj[data[id]] = data;\r\n    }\r\n    return {\r\n        [name]: kvObj,\r\n        ids\r\n    }\r\n}\r\n","import url from '../../utils/url.js';\r\nimport { schema } from './entities/products.js';\r\nimport { FETCH_DATA } from '../middleware/api.js';\r\nimport { combineReducers } from 'redux';\r\n\r\n\r\n//定义actionType\r\nexport const actionTypes = {\r\n    //开始发送请求\r\n    FETCH_LIKES_REQUEST: 'HOME/FETCH_LIKES_REQUEST',\r\n    //获取请求成功\r\n    FETCH_LIKES_SUCCESS: 'HOME/FETCH_LIKES_SUCCESS',\r\n    //获取请求失败\r\n    FETCH_LIKES_FAILURE: 'HOME/FETCH_LIKES_FAILURE',\r\n    //fetch_discount\r\n    FETCH_DISCOUNTS_REQUEST: 'HOME/FETCH_DISCOUNTS_REQUEST',\r\n    FETCH_DISCOUNTS_SUCCESS: 'HOME/FETCH_DISCOUNTS_SUCCESS',\r\n    FETCH_DISCOUNTS_FAILURE: 'HOME/FETCH_DISCOUNTS_FAILURE'\r\n}\r\n\r\n\r\n//定义actionCreater\r\n\r\nconst fetchLikes = (endpoint) => ({\r\n    [FETCH_DATA]: {\r\n        types: [\r\n            actionTypes.FETCH_LIKES_REQUEST,\r\n            actionTypes.FETCH_LIKES_SUCCESS,\r\n            actionTypes.FETCH_LIKES_FAILURE\r\n        ],\r\n        schema,\r\n        endpoint\r\n    }\r\n})\r\n\r\nconst fetchDiscounts = (endpoint) => ({\r\n    [FETCH_DATA]: {\r\n        types: [\r\n            actionTypes.FETCH_DISCOUNTS_REQUEST,\r\n            actionTypes.FETCH_DISCOUNTS_SUCCESS,\r\n            actionTypes.FETCH_DISCOUNTS_FAILURE\r\n        ],\r\n        schema,\r\n        endpoint\r\n    }\r\n})\r\n\r\nconst params = {\r\n    PATH_LIKES: 'likes',\r\n    PATH_DISCOUNTS: 'discounts',\r\n    PAGE_SIZE_LIKES: 5,\r\n    PAGE_SIZE_DISCOUNTS:3\r\n}\r\n\r\nexport const actions = {\r\n    loadLikes: () => {\r\n        return (dispatch, getState) => {\r\n            const { pageCount } = getState().home.likes;\r\n            const rowIndex = pageCount * params.PAGE_SIZE_LIKES;\r\n            const endpoint = url.getProductList(params.PATH_LIKES, rowIndex, params.PAGE_SIZE_LIKES);\r\n            return dispatch(fetchLikes(endpoint));\r\n        }\r\n    },\r\n    loadDiscounts: () => {\r\n        return (dispatch, getState) => {\r\n            if (getState().home.discounts.ids.length === 3) {\r\n                return null;\r\n            }\r\n            const endpoint = url.getProductList(params.PATH_DISCOUNTS, 0, params.PAGE_SIZE_DISCOUNTS);\r\n                return dispatch(fetchDiscounts(endpoint));\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst initialState = {\r\n    likes: {\r\n        isFetching: false,\r\n        pageCount: 0,\r\n        ids: []\r\n    },\r\n    discounts: {\r\n        isFetching: false,\r\n        ids: []\r\n    }\r\n}\r\n\r\n//定义reducer\r\nconst likes = (state = initialState.likes, action) => {\r\n    switch(action.type) {\r\n        case actionTypes.FETCH_LIKES_REQUEST:\r\n            return {\r\n                ...state,\r\n                isFetching: true\r\n            };\r\n        case actionTypes.FETCH_LIKES_SUCCESS:\r\n            return {\r\n            ...state,\r\n            isFetching: false,\r\n            pageCount: state.pageCount + 1,\r\n            ids: state.ids.concat(action.response.ids)\r\n        };\r\n        case actionTypes.FETCH_LIKES_FAILURE:\r\n            return {\r\n                ...state,\r\n                isFetching: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst discounts = (state = initialState.discounts, action) => {\r\n    switch(action.type) {\r\n        case actionTypes.FETCH_DISCOUNTS_REQUEST:\r\n            return {\r\n                ...state,\r\n                isFetching: true\r\n            };\r\n        case actionTypes.FETCH_DISCOUNTS_SUCCESS:\r\n            return {\r\n            ...state,\r\n            isFetching: false,\r\n            ids: state.ids.concat(action.response.ids)\r\n        };\r\n        case actionTypes.FETCH_DISCOUNTS_FAILURE:\r\n            return {\r\n                ...state,\r\n                isFetching: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n//定义selector\r\nexport const getLikes = (state) => {\r\n    return state.home.likes.ids.map(id => {\r\n        return state.entities.products[id];\r\n    });\r\n}\r\n\r\nexport const getDiscounts = (state) => {\r\n    return state.home.discounts.ids.map(id => {\r\n        return state.entities.products[id];\r\n    });\r\n}\r\n\r\nexport const getPageCountOfLikes = (state) => {\r\n    return state.home.likes.pageCount;\r\n}\r\n\r\nconst reducer = combineReducers({\r\n    likes,\r\n    discounts\r\n})\r\n\r\nexport default reducer;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport Category from './components/Category.js';\r\nimport Headline from './components/Headline.js';\r\nimport Discount from './components/Discount.js';\r\nimport LikeList from './components/LikeList.js';\r\nimport HomeHeader from './components/HomeHeader.js';\r\nimport Banner from '../../components/Banner';\r\nimport Activity from './components/Activity.js';\r\nimport Footer from '../../components/Footer'\r\nimport {actions as homeActions, getLikes, getDiscounts, getPageCountOfLikes } from '../../redux/modules/home.js';\r\n\r\nclass Home extends Component {\r\n    render() {\r\n        const { likes, discounts, pageCount } = this.props;\r\n        return (\r\n            <div>\r\n                <HomeHeader />\r\n                <Banner />\r\n                <Category />\r\n                <Headline />\r\n                <Activity />\r\n                <Discount data={discounts} />\r\n                <LikeList data={likes} pageCount={pageCount} fetchLikes={this.fetchLikes}/>\r\n                <Footer />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.homeActions.loadDiscounts();\r\n    }\r\n\r\n\r\n    fetchLikes = () => {\r\n        this.props.homeActions.loadLikes();\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n//定义mapStateToProps(通过selector)和mapDispatchToProps\r\nconst mapStateToProps = (state, props) => {\r\n    return {\r\n        likes: getLikes(state),\r\n        discounts: getDiscounts(state),\r\n        pageCount: getPageCountOfLikes(state)\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        homeActions: bindActionCreators(homeActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './ProductOverview.css';\r\n\r\nclass ProductOverview extends Component {\r\n\r\n    render() {\r\n        const { picture, shop, description, currentPrice, oldPrice, id } = this.props.data;\r\n        return (\r\n            <div className=\"productOverview\">\r\n                <div className=\"productOverview__header\">\r\n                    <div className=\"productOverview__imgContainer\">\r\n                        <img className=\"productOverview__img\" src={picture} alt={shop} />\r\n                    </div>\r\n                    <div className=\"productOverview__baseInfo\">\r\n                        <div className=\"productOverview__title\">{shop}</div>\r\n                        <div className=\"productOverview__content\">{description}</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"productOverview__purchase\">\r\n                    <span className=\"productOverview__symbol\">￥</span>\r\n                    <span className=\"productOverview__price\">{currentPrice}</span>\r\n                    <span className=\"productOverview__price--old\">{`￥${oldPrice}`}</span>\r\n                    <Link to={`/purchase/${id}`} className=\"productOverview__btn\" >购买</Link>\r\n                </div>\r\n                <ul className=\"productOverview__remark\">\r\n                    <li className=\"productOverview__remarkItem\">\r\n                        <i className=\"productOverview__sign2\"></i>\r\n                        <span className=\"productOverview__desc\">过期可退</span>\r\n                    </li>\r\n                    <li className=\"productOverview__remarkItem\">\r\n                        <i className=\"productOverview__sign2\"></i>\r\n                        <span className=\"productOverview__desc\">过期自动作废</span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default ProductOverview;\r\n","import React, { Component } from 'react';\r\nimport \"./ShopInfo.css\"\r\n\r\nclass ShopInfo extends Component {\r\n  render() {\r\n      const { total } = this.props;\r\n      const { shop, address, phone } = this.props.data;\r\n    return (\r\n      <div className=\"shopInfo\">\r\n        <div className=\"shopInfo__header\">\r\n          {`使用商户${total}`}\r\n          <span className=\"shopInfo__arrow\"></span>\r\n        </div>\r\n        <div className=\"shopInfo__middle\">\r\n          <div className=\"shopInfo__middleLeft\">\r\n            <div className=\"shopInfo__shopName\">\r\n            {shop}\r\n            </div>\r\n            <div className=\"shopInfo__starsWrapper\">\r\n              <span className=\"shopInfo__stars\">\r\n              <i className=\"shopInfo__stars--red\" style={{\"width\": \"100%\"}}></i>\r\n              </span>\r\n              <span className=\"shopInfo__distance\">>100km</span>\r\n            </div>\r\n          </div>\r\n            <a className=\"shopInfo__middleRight\" href={`tel://${phone}`}>\r\n                <i className=\"shopInfo__phoneIcon\"></i>\r\n            </a>\r\n        </div>\r\n        <div className=\"shopInfo__bottom\">\r\n          <i className=\"shopInfo__locationIcon\"></i>{address}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShopInfo;\r\n","import React, { Component } from 'react';\r\nimport \"./Detail.css\"\r\n\r\nclass Detail extends Component {\r\n  render() {\r\n      const {\r\n          detail: { category, products, remark },\r\n          currentPrice,\r\n          oldPrice\r\n      } = this.props.data;\r\n    return (\r\n      <div className=\"detail\">\r\n        <div className=\"detail__header\">\r\n          <span>团购详情</span>\r\n          <i className=\"detail__headerIcon\"></i>\r\n        </div>\r\n        <table cellPadding=\"0\" cellSpacing=\"0\" className=\"detail__table\">\r\n          <tbody>\r\n            <tr className=\"detail__row\">\r\n              <th colSpan=\"3\" className=\"detail__category\">\r\n                {category}\r\n              </th>\r\n            </tr>\r\n            <tr className=\"detail__row\">\r\n              <td>{products[0].name}</td>\r\n              <td className=\"detail__td--alignRight\">\r\n              {products[0].quantity}\r\n              </td>\r\n              <td className=\"detail__td--alignRight\">\r\n              {products[0].price}\r\n              </td>\r\n            </tr>\r\n            <tr className=\"detail__row\">\r\n              <td/>\r\n              <td className=\"detail__td--price\">\r\n                最高价值\r\n                <br/>\r\n                <strong className=\"detail__td--priceNew\">\r\n                  团购价\r\n                </strong>\r\n              </td>\r\n              <td className=\"detail__td--price\">\r\n                {oldPrice}\r\n                <br/>\r\n                <strong className=\"detail__td--priceNew\">\r\n                  {currentPrice}\r\n                </strong>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <div className=\"detail__remark\">\r\n          {remark}\r\n        </div>\r\n        <div className=\"detail__more\">\r\n          <span>更多图文详情</span>\r\n          <span className=\"detail__notice\">(建议Wifi环境下打卡，土豪请随意)</span>\r\n          <i className=\"detail__arrow\"/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Detail;\r\n","import React, { Component } from \"react\";\r\nimport \"./Remark.css\";\r\n\r\nclass Remark extends Component {\r\n  render() {\r\n    const { purchaseNotes, validityPeriod } = this.props.data;\r\n    return (\r\n      <div className=\"remark\">\r\n        <div className=\"remark__header\">\r\n          购买须知\r\n          <i className=\"remark__icon\" />\r\n        </div>\r\n        <div className=\"remark__list\">\r\n          <dl className=\"remark__item\">\r\n            <dt className=\"remark__itemTitle\">有效期</dt>\r\n            <dd className=\"remark__itemDesc\">{validityPeriod}</dd>\r\n          </dl>\r\n          {purchaseNotes.map((item, index) => {\r\n            return (\r\n              <dl key={index} className=\"remark__item\">\r\n                <dt className=\"remark__itemTitle\">{item.title}</dt>\r\n                <dd className=\"remark__itemDesc\">{item.content}</dd>\r\n              </dl>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Remark;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./BuyButton.css\";\r\n\r\nclass BuyButton extends Component {\r\n  render() {\r\n    const { productId } = this.props;\r\n    return (\r\n      <Link className=\"buyButton\" to={`/purchase/${productId}`}>\r\n        立即购买\r\n      </Link>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BuyButton;\r\n","import React, { Component } from 'react';\r\nimport \"./index.css\"\r\n\r\nclass Header extends Component {\r\n  render() {\r\n    const { grey, title, onBack } = this.props;\r\n    const backgroundColor = grey ?'#f0f0f0': '#fff';\r\n    return (\r\n      <header className=\"header\" style={{'backgroundColor':backgroundColor }}>\r\n        <div className=\"header__back\" onClick={onBack}>\r\n          返回\r\n        </div>\r\n        <div className=\"header__title\">{title}</div>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;\r\n","\r\nexport const schema = {\r\n    name: 'shops',\r\n    id: 'id'\r\n}\r\n\r\nconst reducer = (state = {}, action) => {\r\n    if (action.response && action.response[schema.name]) {\r\n        return {\r\n            ...state,\r\n            ...action.response.shops\r\n        }\r\n    }\r\n    return state;\r\n};\r\n\r\nexport const getShopById = (state, id) => {\r\n    return state.entities.shops[id];\r\n}\r\n\r\n\r\nexport default reducer;\r\n","import url from '../../utils/url.js';\r\nimport { FETCH_DATA } from '../middleware/api.js';\r\nimport { combineReducers } from 'redux';\r\nimport { schema as productSchema,  getProductDetail, getProductById } from './entities/products.js';\r\nimport { schema as shopSchema,  getShopById } from './entities/shops.js';\r\n\r\n\r\nconst initialState = {\r\n    product: {\r\n        isFetching: false,\r\n        id: null\r\n    },\r\n    relatedShop: {\r\n        isFetching: false,\r\n        id: null\r\n    }\r\n}\r\n\r\nexport const actionTypes = {\r\n    //定义商品详情的actiontype\r\n    FETCH_PRODUCT_DETAIL_REQUEST: 'DETAIL/FETCH_PRODUCT_DETAIL_REQUEST',\r\n    FETCH_PRODUCT_DETAIL_SUCCESS: 'DETAIL/FETCH_PRODUCT_DETAIL_SUCCESS',\r\n    FETCH_PRODUCT_DETAIL_FAILURE: 'DETAIL/FETCH_PRODUCT_DETAIL_FAILURE',\r\n\r\n    //定义商店信息的actionType\r\n    FETCH_SHOP_REQUEST: 'DETAIL/FETCH_SHOP_REQUEST',\r\n    FETCH_SHOP_SUCCESS: 'DETAIL/FETCH_SHOP_REQUEST',\r\n    FETCH_SHOP_FAILURE: 'DETAIL/FETCH_SHOP_REQUEST'\r\n}\r\n\r\nexport const actions = {\r\n    loadProductDetail: (id) => {\r\n        return (dispatch, getState) => {\r\n            const product = getProductDetail(getState(), id);\r\n            if (product) {\r\n                return dispatch(fetchProductDetailSuccess(id));\r\n            }\r\n            const endpoint = url.getProductDetail(id)\r\n            return dispatch(fetchProductDetail(endpoint, id));\r\n        }\r\n    },\r\n    loadRelatedShop: (id) => {\r\n        return (dispatch, getState) => {\r\n            const shop = getShopById(getState(), id);\r\n            if (shop) {\r\n                return dispatch(fetchShopSuccess(id));\r\n            }\r\n            const endpoint = url.getShop(id);\r\n            return dispatch(fetchShop(endpoint, id));\r\n        }\r\n    }\r\n}\r\n//定义获取产品详情成功action\r\nconst fetchProductDetailSuccess = (id) => ({\r\n    type: actionTypes.FETCH_PRODUCT_DETAIL_SUCCESS,\r\n    id\r\n})\r\n\r\n//定义获取商店信息成功action\r\nconst fetchShopSuccess = (id) => ({\r\n    type: actionTypes.FETCH_SHOP_SUCCESS,\r\n    id\r\n})\r\n\r\n//定义可被中间件api处理的异步action\r\nconst fetchProductDetail = (endpoint, id) => ({\r\n    [FETCH_DATA]: {\r\n        types: [\r\n            actionTypes.FETCH_PRODUCT_DETAIL_REQUEST,\r\n            actionTypes.FETCH_PRODUCT_DETAIL_SUCCESS,\r\n            actionTypes.FETCH_PRODUCT_DETAIL_FAILURE\r\n        ],\r\n        schema: productSchema,\r\n        endpoint\r\n    },\r\n    id\r\n})\r\nconst fetchShop = (endpoint, id) => ({\r\n    [FETCH_DATA]: {\r\n        types: [\r\n            actionTypes.FETCH_SHOP_REQUEST,\r\n            actionTypes.FETCH_SHOP_SUCCESS,\r\n            actionTypes.FETCH_SHOP_FAILURE\r\n        ],\r\n        schema: shopSchema,\r\n        endpoint\r\n    },\r\n    id\r\n})\r\n\r\n//定义商品详情reducer\r\nconst product = (state = initialState.product, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.FETCH_PRODUCT_DETAIL_REQUEST:\r\n            return { ...state, isFetching: true };\r\n        case actionTypes.FETCH_PRODUCT_DETAIL_SUCCESS:\r\n            return { ...state, isFetching: false, id: action.id };\r\n        case actionTypes.FETCH_PRODUCT_DETAIL_FAILURE:\r\n            return { ...state, isFetching: false, id: null };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst relatedShop = (state = initialState.relatedShop, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.FETCH_SHOP_REQUEST:\r\n            return { ...state, isFetching: true };\r\n        case actionTypes.FETCH_SHOP_SUCCESS:\r\n            return { ...state, isFetching: false, id: action.id };\r\n        case actionTypes.FETCH_SHOP_FAILURE:\r\n            return { ...state, isFetching: false, id: null };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst reducer = combineReducers({\r\n    product,\r\n    relatedShop\r\n})\r\n\r\n\r\n//定义详情页需要的selector\r\nexport const getProduct = (state, id) => {\r\n    return getProductDetail(state, id);\r\n}\r\nexport const getRelatedShop = (state, productId) => {\r\n    const product = getProductById(state, productId);\r\n    let shopId = product ? product.nearestShop : null;\r\n    if(shopId) {\r\n        return getShopById(state, shopId);\r\n    }\r\n    return null;\r\n}\r\n\r\nexport default reducer;\r\n","import React, { Component } from 'react';\r\nimport ProductOverview from './components/ProductOverview.js';\r\nimport ShopInfo from './components/ShopInfo.js';\r\nimport Detail from './components/Detail.js';\r\nimport Remark from './components/Remark.js';\r\nimport BuyButton from './components/BuyButton.js';\r\nimport Header from '../../components/Header';\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { actions as detailActions, getProduct, getRelatedShop } from '../../redux/modules/detail.js';\r\n\r\n\r\n\r\nclass ProductDetail extends Component {\r\n\r\n\r\n    render() {\r\n        const { product, relatedShop } = this.props;\r\n        return (\r\n            <div>\r\n                <Header title=\"团购详情\" onBack={this.onBack}/>\r\n                {product && <ProductOverview data={product} />}\r\n                {relatedShop && (\r\n                  <ShopInfo data={relatedShop} total={product.shopIds.length} />\r\n                )}\r\n                {product && (\r\n                  <div>\r\n                    <Detail data={product} />\r\n                    <Remark data={product} />\r\n                    <BuyButton productId={product.id} />\r\n                  </div>\r\n                )}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onBack = () => {\r\n        console.log('this props', this.props)\r\n        this.props.history.goBack()\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { product } = this.props;\r\n        console.log('product', product)\r\n        console.log('props', this.props)\r\n        if (!product) {\r\n            const productId = this.props.match.params.id;\r\n            this.props.detailActions.loadProductDetail(productId);\r\n        } else if (!this.props.relatedShop) {\r\n            this.props.detailActions.loadRelatedShop(product.nearestShop);\r\n        }\r\n    }\r\n    componentDidUpdate(preProps) {\r\n      // 第一次获取到产品详情时，需要继续获取关联的店铺信息\r\n      if (!preProps.product && this.props.product) {\r\n        this.props.detailActions.loadRelatedShop(this.props.product.nearestShop);\r\n      }\r\n    }\r\n\r\n\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    const productId = props.match.params.id;\r\n    return {\r\n        product: getProduct(state, productId),\r\n        relatedShop: getRelatedShop(state, productId)\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        detailActions: bindActionCreators(detailActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductDetail);\r\n","import React, { Component } from 'react';\r\nimport './SearchBox.css'\r\n\r\n\r\nclass SearchBox extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"searchBox\">\r\n                <div className=\"searchBox__container\">\r\n                    <input className=\"searchBox__text\" onChange={this.onChange} value={this.props.data}></input>\r\n                    <span className=\"searchBox__clear\" onClick={this.onClear}></span>\r\n                    <span className=\"searchBox__cancel\" onClick={this.onCancel}>取消</span>\r\n                </div>\r\n                {this.props.data.length > 0 ? this.renderSuggestList() : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderSuggestList() {\r\n        const { relatedKeywords } = this.props;\r\n        return (\r\n            <ul className=\"searchBox__list\" >\r\n                {relatedKeywords.map(item => {\r\n                    return (\r\n                        <li className=\"searchBox__item\" key={item.id} onClick={this.onClick.bind(this, item)}>\r\n                            <span className=\"searchBox__itemKeyworkd\">{item.keyword}</span>\r\n                            <span className=\"searchBox__itemQuantity\">约{item.quantity}个结果</span>\r\n                        </li>\r\n                    )\r\n                })}\r\n            </ul>\r\n        )\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.props.onChange(e.target.value);\r\n    }\r\n    onClear = () => {\r\n        this.props.onClear();\r\n    }\r\n    onClick = (item) => {\r\n        this.props.onClickItem(item);\r\n    }\r\n\r\n    onCancel = () => {\r\n        this.props.onCancel();\r\n    }\r\n}\r\nexport default SearchBox;\r\n","import React, { Component } from 'react';\r\nimport './PopularSearch.css'\r\n\r\n\r\nclass PopularSearch extends Component {\r\n\r\n    render() {\r\n        const popularKeywords = this.props.data;\r\n        return (\r\n            <div className=\"popularSearch\">\r\n                {popularKeywords.map((item) => {\r\n                    return (\r\n                        <span className=\"popularSearch__item\" key={item.id} onClick={this.onClick.bind(this,item)} >\r\n                            {item.keyword}\r\n                        </span>\r\n                    )\r\n                })}\r\n            </div>\r\n        )\r\n\r\n    }\r\n    onClick(item) {\r\n        this.props.onClick(item);\r\n    }\r\n\r\n}\r\n\r\nexport default PopularSearch;\r\n","import React, { Component } from 'react';\r\nimport './SearchHistory.css';\r\n\r\nclass SearchHistory extends Component {\r\n\r\n    render() {\r\n        const { data } = this.props;\r\n        return (\r\n            <div className=\"searchHistory\">\r\n                <div className=\"searchHistory__header\">搜索历史</div>\r\n                <ul className=\"searchHistory__list\">\r\n                    {data.map((item, index) => {\r\n                        return (\r\n                            <li className=\"searchHistory__item\" key={index} onClick={this.onClick.bind(this, item)} >{item.keyword}</li>\r\n                        )\r\n                    })}\r\n                </ul>\r\n                <div className=\"searchHistory__clear\" onClick={this.onClear}>清空搜索记录</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onClick = (item) => {\r\n        this.props.onClick(item);\r\n    }\r\n    onClear = () => {\r\n        this.props.onClear();\r\n    }\r\n}\r\nexport default SearchHistory;\r\n","\r\nexport const schema = {\r\n    name: 'keywords',\r\n    id: 'id'\r\n}\r\n\r\n\r\nconst reducer = (state = {}, action) => {\r\n    if (action.response && action.response.keywords) {\r\n        return {\r\n            ...state,\r\n            ...action.response.keywords\r\n        };\r\n    }\r\n    return state;\r\n}\r\n\r\nexport default reducer;\r\n","import url from '../../utils/url.js';\r\nimport { FETCH_DATA } from \"../middleware/api\";\r\nimport { combineReducers } from 'redux';\r\nimport { schema as keywordSchema } from './entities/keywords.js';\r\nimport { schema as shopsSchema } from './entities/shops.js';\r\n\r\n\r\n//1.定义state\r\nconst initialState = {\r\n    //搜索框输入值\r\n    inputText: '',\r\n    //热门关键词\r\n    popularKeywords: {\r\n        isFetching: false,\r\n        ids: []\r\n    },\r\n    //定义关联关键词\r\n    relatedKeywords: {\r\n\r\n    },\r\n    //定义历史查询记录\r\n    historyKeywords: [],\r\n\r\n    //定义查询结果所需的商铺信息\r\n    searchedShopsByKeyword: {\r\n\r\n    }\r\n\r\n}\r\n\r\n//定义actionType\r\nconst actionTypes = {\r\n    //获取热门关键词\r\n    FETCH_POPULAR_KEYWORDS_REQUEST: 'SEARCH/FETCH_POPULAR_KEYWORDS_REQUEST',\r\n    FETCH_POPULAR_KEYWORDS_SUCCESS: 'SEARCH/FETCH_POPULAR_KEYWORDS_SUCCESS',\r\n    FETCH_POPULAR_KEYWORDS_FAILURE: 'SEARCH/FETCH_POPULAR_KEYWORDS_FAILURE',\r\n    //获取相关关键词\r\n    FETCH_RELATED_KEYWORDS_REQUEST: 'SEARCH/FETCH_RELATED_KEYWORDS_REQUEST',\r\n    FETCH_RELATED_KEYWORDS_SUCCESS: 'SEARCH/FETCH_RELATED_KEYWORDS_SUCCESS',\r\n    FETCH_RELATED_KEYWORDS_FAILURE: 'SEARCH/FETCH_RELATED_KEYWORDS_FAILURE',\r\n    //或许关键词查询到的相关店铺\r\n    FETCH_RELATED_SHOPS_REQUEST: 'SEARCH/FETCH_RELATED_SHOPS_REQUEST',\r\n    FETCH_RELATED_SHOPS_SUCCESS: 'SEARCH/FETCH_RELATED_SHOPS_SUCCESS',\r\n    FETCH_RELATED_SHOPS_FAILURE: 'SEARCH/FETCH_RELATED_SHOPS_FAILURE',\r\n    //设置搜索框输入值\r\n    SET_INPUT_TEXT: 'SEARCH/SET_INPUT_TEXT',\r\n    //清空搜索框输入值\r\n    CLEAR_INPUT_TEXT: 'SEARCH/CLEAR_INPUT_TEXT',\r\n    //添加历史查询记录\r\n    ADD_HISTORY_KEYWORD: 'SEARCH/ADD_HISTORY_KEYWORD',\r\n    //清空历史查询记录\r\n    CLEAR_HISTORY_KEYWORDS: 'SEARCH/CLEAR_HISTORY_KEYWORDS'\r\n}\r\n\r\n//定义action\r\nexport const actions = {\r\n    loadPopularKeywords: () => {\r\n        return (dispatch, getState) => {\r\n            const popularKeywords = getState().search.popularKeywords.ids;\r\n            if (popularKeywords.length > 0) {\r\n                return null;\r\n            }\r\n            const endpoint = url.getPopularKeywords();\r\n            return dispatch(fetchPopularKeywords(endpoint));\r\n        }\r\n    },\r\n\r\n    loadRelatedKeywords: (text) => {\r\n        return (dispatch, getState) => {\r\n            const relatedKeyword = getState().search.relatedKeywords[text];\r\n            if (relatedKeyword && relatedKeyword.ids.length > 0) {\r\n                return null;\r\n            }\r\n            const endpoint = url.getRelatedKeywords(text);\r\n            return dispatch(fetchRelatedKeywords(endpoint, text));\r\n        }\r\n    },\r\n\r\n    setInputText: (text) => ({\r\n        type: actionTypes.SET_INPUT_TEXT,\r\n        text: text\r\n    }),\r\n\r\n    clearInputText: () => ({\r\n        type: actionTypes.CLEAR_INPUT_TEXT,\r\n    }),\r\n\r\n    addHistoryKeyword: (id) => ({\r\n        type: actionTypes.ADD_HISTORY_KEYWORD,\r\n        id\r\n    }),\r\n\r\n    clearHistoryKeywords: () => ({\r\n        type: actionTypes.CLEAR_HISTORY_KEYWORDS\r\n    }),\r\n\r\n    loadRelatedShops: (text) => {\r\n        return (dispatch, getState) => {\r\n            const searchedShopsByKeyword = getState().search.searchedShopsByKeyword;\r\n            if (searchedShopsByKeyword[text]) {\r\n                return null;\r\n            }\r\n            const endpoint = url.getSearchedShops(text);\r\n            return dispatch(fetchRelatedShops(endpoint, text));\r\n        }\r\n    }\r\n}\r\n\r\nconst fetchRelatedShops = (endpoint, text) => ({\r\n    [FETCH_DATA]: {\r\n        types: [\r\n            actionTypes.FETCH_RELATED_SHOPS_REQUEST,\r\n            actionTypes.FETCH_RELATED_SHOPS_SUCCESS,\r\n            actionTypes.FETCH_RELATED_SHOPS_FAILURE\r\n        ],\r\n        endpoint,\r\n        schema: shopsSchema\r\n    },\r\n    text\r\n})\r\n\r\nconst fetchPopularKeywords = (endpoint) => ({\r\n    [FETCH_DATA]: {\r\n        types: [\r\n            actionTypes.FETCH_POPULAR_KEYWORDS_REQUEST,\r\n            actionTypes.FETCH_POPULAR_KEYWORDS_SUCCESS,\r\n            actionTypes.FETCH_POPULAR_KEYWORDS_FAILURE\r\n        ],\r\n        endpoint,\r\n        schema: keywordSchema\r\n    }\r\n})\r\n\r\nconst fetchRelatedKeywords = (endpoint, text) => ({\r\n    [FETCH_DATA]: {\r\n        types: [\r\n            actionTypes.FETCH_RELATED_KEYWORDS_REQUEST,\r\n            actionTypes.FETCH_RELATED_KEYWORDS_SUCCESS,\r\n            actionTypes.FETCH_RELATED_KEYWORDS_FAILURE\r\n        ],\r\n        endpoint,\r\n        schema: keywordSchema\r\n    },\r\n    text\r\n})\r\n\r\n//定义reducer\r\nconst searchedShopsByKeyword = (state = initialState.searchedShopsByKeyword, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.FETCH_RELATED_SHOPS_REQUEST:\r\n        case actionTypes.FETCH_RELATED_SHOPS_SUCCESS:\r\n        case actionTypes.FETCH_RELATED_SHOPS_FAILURE:\r\n            return {\r\n                ...state,\r\n                [action.text]: searchedShops(state[action.text], action)\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nconst searchedShops = (state = { isFetching: false, ids: [] }, action) => {\r\n    console.log('action', action)\r\n    switch (action.type) {\r\n        case actionTypes.FETCH_RELATED_SHOPS_REQUEST:\r\n            return {\r\n                ...state,\r\n                isFetching: true\r\n            };\r\n        case actionTypes.FETCH_RELATED_SHOPS_SUCCESS:\r\n            return {\r\n                ...state,\r\n                isFetching: false,\r\n                ids: action.response.ids\r\n            };\r\n        case actionTypes.FETCH_RELATED_SHOPS_FAILURE:\r\n            return {\r\n                ...state,\r\n                isFetching: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nconst popularKeywords = (state = initialState.popularKeywords, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.FETCH_POPULAR_KEYWORDS_REQUEST:\r\n            return { ...state, isFetching: true };\r\n        case actionTypes.FETCH_POPULAR_KEYWORDS_SUCCESS:\r\n            return {\r\n                ...state,\r\n                isFetching: false,\r\n                ids: action.response.ids\r\n            };\r\n        case actionTypes.FETCH_POPULAR_KEYWORDS_FAILURE:\r\n            return {\r\n                ...state,\r\n                isFetching: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst relatedKeywords = (state = initialState.relatedKeywords, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.FETCH_RELATED_KEYWORDS_REQUEST:\r\n        case actionTypes.FETCH_RELATED_KEYWORDS_SUCCESS:\r\n        case actionTypes.FETCH_RELATED_KEYWORDS_FAILURE:\r\n            return {\r\n                ...state,\r\n                [action.text]: relatedKeywordsByText(state[action.text], action)\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst relatedKeywordsByText = (state = { isFetching: true, ids: [] }, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.FETCH_RELATED_KEYWORDS_REQUEST:\r\n            return {\r\n                ...state,\r\n                isFetching: true\r\n            };\r\n        case actionTypes.FETCH_RELATED_KEYWORDS_SUCCESS:\r\n            return {\r\n                ...state,\r\n                isFetching: false,\r\n                ids: action.response.ids\r\n            };\r\n        case actionTypes.FETCH_RELATED_KEYWORDS_FAILURE:\r\n            return {\r\n                ...state,\r\n                isFetching: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst inputText = (state = initialState.inputText, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.SET_INPUT_TEXT:\r\n            return action.text;\r\n        case actionTypes.CLEAR_INPUT_TEXT:\r\n            return '';\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst historyKeywords = ( state = initialState.historyKeywords, action ) => {\r\n    switch (action.type) {\r\n        case actionTypes.ADD_HISTORY_KEYWORD:\r\n            const data = state.filter(item => {\r\n                if (action.id !== item) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            })\r\n            return [action.id, ...data];\r\n        case actionTypes.CLEAR_HISTORY_KEYWORDS:\r\n            return [];\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst reducer = combineReducers({\r\n    popularKeywords,\r\n    relatedKeywords,\r\n    inputText,\r\n    historyKeywords,\r\n    searchedShopsByKeyword\r\n})\r\n\r\nexport default reducer;\r\n\r\n\r\n//定义selector\r\nexport const getInputText = (state) => {\r\n    return state.search.inputText;\r\n}\r\n\r\nexport const getPopularKeywords = (state) => {\r\n    return state.search.popularKeywords.ids.map(id => {\r\n        return state.entities.keywords[id];\r\n    });\r\n}\r\n\r\nexport const getRelatedKeywords = state => {\r\n    const text = state.search.inputText;\r\n    if(!text || text.trim().length === 0) {\r\n      return [];\r\n    }\r\n    const relatedKeyword = state.search.relatedKeywords[text];\r\n    if (!relatedKeyword) {\r\n        return []\r\n    }\r\n    return relatedKeyword.ids.map(id => {\r\n        return state.entities.keywords[id];\r\n    });\r\n}\r\n\r\nexport const getHistoryKeywords = (state) => {\r\n    return state.search.historyKeywords.map(id => {\r\n        return state.entities.keywords[id];\r\n    })\r\n}\r\n\r\nexport const getSearchedShops = state => {\r\n  const keywordId = state.search.historyKeywords[0];\r\n  if(!keywordId) {\r\n    return [];\r\n  }\r\n  const shops = state.search.searchedShopsByKeyword[keywordId];\r\n  return shops.ids.map(id => {\r\n    return state.entities.shops[id];\r\n  })\r\n}\r\n\r\nexport const getCurrentKeyword = (state) => {\r\n    const id = state.search.historyKeywords[0];\r\n    if (!id) {\r\n        return ''\r\n    }\r\n    return state.entities.keywords[id];\r\n}\r\n","import React, { Component } from 'react';\r\nimport SearchBox from './components/SearchBox.js';\r\nimport PopularSearch from './components/PopularSearch.js';\r\nimport SearchHistory from './components/SearchHistory.js';\r\nimport { actions as searchActions, getInputText, getPopularKeywords, getRelatedKeywords, getHistoryKeywords } from '../../redux/modules/search.js';\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Search extends Component {\r\n\r\n    render() {\r\n        const {inputText, popularKeywords, relatedKeywords, historyKeywords, searchActions} = this.props;\r\n        return (\r\n            <div>\r\n                <SearchBox\r\n                    data={inputText} relatedKeywords={relatedKeywords}\r\n                    onClear={this.onClearInput}\r\n                    onChange={this.onChangeInput}\r\n                    onClickItem={this.onClickItem}\r\n                    onCancel={this.onCancel}\r\n\r\n                />\r\n                <PopularSearch data={popularKeywords} onClick={this.onClickItem} />\r\n                <SearchHistory data={historyKeywords} onClear={this.onClearHistory} onClick={this.onClickItem}/>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        const { loadPopularKeywords } = this.props.searchActions;\r\n        loadPopularKeywords();\r\n    }\r\n\r\n    onCancel = () => {\r\n        this.onClearInput();\r\n        this.props.history.goBack();\r\n    }\r\n\r\n    onClickItem = (item) => {\r\n        this.props.searchActions.setInputText(item.keyword);\r\n        this.props.searchActions.addHistoryKeyword(item.id);\r\n        this.props.searchActions.loadRelatedShops(item.id);\r\n        this.props.history.push('./search_result');\r\n    }\r\n\r\n    onClearInput = () => {\r\n        this.props.searchActions.clearInputText();\r\n    }\r\n\r\n    onChangeInput = (text) => {\r\n        this.props.searchActions.setInputText(text);\r\n        this.props.searchActions.loadRelatedKeywords(text);\r\n    }\r\n\r\n    onClearHistory = () => {\r\n        this.props.searchActions.clearHistoryKeywords();\r\n    }\r\n    componentWillUnmount() {\r\n      const { clearInputText } = this.props.searchActions;\r\n      clearInputText();\r\n    }\r\n\r\n}\r\n\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    return {\r\n        inputText: getInputText(state),\r\n        popularKeywords: getPopularKeywords(state),\r\n        relatedKeywords: getRelatedKeywords(state),\r\n        historyKeywords: getHistoryKeywords(state),\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        searchActions: bindActionCreators(searchActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);\r\n","import React, { Component } from \"react\";\r\nimport \"./ShopItem.css\"\r\n\r\nclass ShopItem extends Component {\r\n  render() {\r\n    const {\r\n      url,\r\n      pic,\r\n      shop,\r\n      star,\r\n      price,\r\n      quantity,\r\n      region,\r\n      category\r\n    } = this.props.data;\r\n    return (\r\n      <a className=\"shopItem\" href={url}>\r\n        <div\r\n          className=\"shopItem__pic\"\r\n          style={{ backgroundImage: \"url(\" + pic + \")\" }}\r\n        />\r\n        <div className=\"shopItem__content\">\r\n          <div className=\"shopItem__title\">{shop}</div>\r\n          <div className=\"shopItem__comment\">\r\n            <span className={\"shopItem__star shopItem__star--\" + star} />\r\n            <span className=\"shopItem__quantity\">{quantity}</span>\r\n            <span className=\"shopItem__price\">{price}/人</span>\r\n          </div>\r\n          <div className=\"shopItem__info\">\r\n            <span className=\"shopItem__region\">{region}</span>\r\n            <span className=\"shopItem__category\">{category}</span>\r\n          </div>\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShopItem;\r\n","import React, { Component } from \"react\";\r\nimport ShopItem from './ShopItem.js';\r\nimport \"./ShopList.css\"\r\n\r\n\r\nclass ShopList extends Component {\r\n  render() {\r\n      console.log('shoplist', this.props)\r\n      const shops = this.props.data;\r\n    return (\r\n      <div className=\"shopList\">\r\n        <div className=\"shopList__filter\">\r\n          <span className=\"shopList__filterItem\">全部商区</span>\r\n          <span className=\"shopList__filterItem\">全部分类</span>\r\n          <span className=\"shopList__filterItem\">智能排序</span>\r\n        </div>\r\n        <div className=\"shopList__list\">\r\n          {shops.map((item, index) => {\r\n            return (\r\n              <div key={item.id}>\r\n                <ShopItem data={item} />\r\n                {index < shops.length - 1 ? (\r\n                  <div className=\"shopList__divider\" />\r\n                ) : null}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShopList;\r\n","import React, { Component } from 'react';\r\nimport \"./SearchHeader.css\"\r\n\r\nclass SearchHeader extends Component {\r\n  render() {\r\n    const { onBack, onSearch} = this.props;\r\n    return (\r\n      <header className=\"searchHeader\">\r\n        <div className=\"searchHeader__back\" onClick={onBack}></div>\r\n        <div className=\"searchHeader__list\">\r\n          <span className=\"searchHeader__item searchHeader__item--selected\">商户</span>\r\n          <span className=\"searchHeader__item\">闪惠团购</span>\r\n        </div>\r\n        <div className=\"searchHeader__icon\" onClick={onSearch}></div>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchHeader;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport './KeywordBox.css'\r\n\r\nclass KeywordBox extends Component {\r\n  render() {\r\n    const { text } = this.props;\r\n    console.log('text', text)\r\n    return (\r\n      <div className=\"keywordBox\">\r\n        <Link to=\"/search\" className=\"keywordBox__text\">\r\n          {text.keyword}\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default KeywordBox;\r\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport ShopList from \"./components/ShopList.js\";\nimport SearchHeader from \"./components/SearchHeader.js\";\nimport KeywordBox from \"./components/KeywordBox.js\";\nimport Banner from '../../components/Banner';\nimport { getSearchedShops, getCurrentKeyword } from '../../redux/modules/search.js';\n\nclass SearchResult extends Component {\n  render() {\n      const { shops, currentKeyword } = this.props;\n    return (\n      <div>\n        <SearchHeader onBack={this.handleBack} onSearch={this.handleSearch}/>\n        <KeywordBox text={currentKeyword}/>\n        <Banner dark />\n        <ShopList data={shops} />\n      </div>\n    );\n  }\n\n  handleBack = () => {\n    this.props.history.push('/')\n  }\n\n  handleSearch = () => {\n    this.props.history.push('/search')\n  }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        shops: getSearchedShops(state),\n        currentKeyword: getCurrentKeyword(state)\n    }\n}\n\nexport default connect(mapStateToProps, null)(SearchResult);\n","import React, { Component } from 'react';\r\nimport './LoginHeader.css';\r\n\r\nclass LoginHeader extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"loginHeader\">\r\n                <a className=\"loginHeader__back\"></a>\r\n                <div className=\"loginHeader__title\">账号密码登录</div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LoginHeader;\r\n","import React, { Component } from 'react';\r\nimport './LoginForm.css';\r\n\r\nclass LoginForm extends Component {\r\n\r\n    render() {\r\n        const { username, password, onChange, onSubmit } = this.props;\r\n        return (\r\n            <div className=\"loginForm\">\r\n                <div className=\"loginForm__inputContainer\">\r\n                    <div className=\"loginForm__row\">\r\n                        <label className=\"loginForm__mobileLabel\">86</label>\r\n                        <input className=\"loginForm__input\" name=\"username\" value={username} onChange={onChange}></input>\r\n                    </div>\r\n                    <div className=\"loginForm__row\">\r\n                        <label className=\"loginForm__passwordLabel\">密码</label>\r\n                        <input className=\"loginForm__input\" name=\"password\" type=\"password\" value={password} onChange={onChange}></input>\r\n                    </div>\r\n                </div>\r\n                <div className=\"loginForm__btnContainer\">\r\n                    <button className=\"loginForm__btn\" onClick={onSubmit}>登录</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LoginForm;\r\n","//1.定义state\r\nconst initialState = {\r\n    username: localStorage.getItem('username') || '',\r\n    password: '',\r\n    status: localStorage.getItem('isLogin') || false,\r\n    isFetching: false\r\n}\r\n//2.定义action\r\nconst actionTypes = {\r\n    LOGIN_REQUEST: 'LOGIN/LOGIN_REQUEST',\r\n    LOGIN_SUCCESS: 'LOGIN/LOGIN_SUCCESS',\r\n    LOGIN_FAILURE: 'LOGIN/LOGIN_FAILURE',\r\n    LOGOUT: 'LOGIN/LOGOUT',\r\n    SET_USERNAME: 'LOGIN/SET_USERNAME',\r\n    SET_PASSWORD: 'LOGIN/SET_PASSWORD'\r\n}\r\n\r\nexport const actions = {\r\n    login: () => {\r\n        return (dispatch, getState) => {\r\n            const { username, password } = getState().login;\r\n            if (!username || !password) {\r\n                return dispatch(loginFailure('用户名和密码不能为空'));\r\n            }\r\n            dispatch(loginRequest());\r\n            return new Promise((resolve, reject) => {\r\n                setTimeout(() => {\r\n                    dispatch(loginSuccess());\r\n                    localStorage.setItem('username', username);\r\n                    localStorage.setItem('isLogin', true);\r\n                    resolve();\r\n                }, 1000)\r\n            })\r\n        }\r\n    },\r\n    logout: () => {\r\n        localStorage.removeItem('username');\r\n        localStorage.removeItem('isLogin');\r\n        return {\r\n            type: actionTypes.LOGOUT\r\n        }\r\n    },\r\n    setUsername: (username) => ({\r\n        type: actionTypes.SET_USERNAME,\r\n        username\r\n    }),\r\n    setPassword: (password) => ({\r\n        type: actionTypes.SET_PASSWORD,\r\n        password\r\n    })\r\n}\r\n\r\nconst loginRequest = () => ({\r\n    type: actionTypes.LOGIN_REQUEST\r\n})\r\nconst loginSuccess = () => ({\r\n    type: actionTypes.LOGIN_SUCCESS\r\n})\r\n\r\nconst loginFailure = () => ({\r\n    type: actionTypes.LOGIN_FAILURE\r\n})\r\n//3.定义reducer\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.LOGIN_REQUEST:\r\n            return { ...state, isFetching: true };\r\n        case actionTypes.LOGIN_SUCCESS:\r\n            return { ...state, isFetching: false, status: true };\r\n        case actionTypes.LOGIN_FAILURE:\r\n            return { ...state, isFetching: false };\r\n        case actionTypes.LOGOUT:\r\n            return { ...state, status: false, username: '' };\r\n        case actionTypes.SET_USERNAME:\r\n            return { ...state, username: action.username };\r\n        case actionTypes.SET_PASSWORD:\r\n            return { ...state, password: action.password };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport default reducer;\r\n\r\nexport const getUsername = (state) => {\r\n    return state.login.username;\r\n}\r\nexport const getPassword = (state) => {\r\n    return state.login.password;\r\n}\r\nexport const isLogin = (state) => {\r\n    return state.login.status;\r\n}\r\n","import React, { Component } from 'react';\r\nimport LoginHeader from './components/LoginHeader.js';\r\nimport LoginForm from './components/LoginForm.js';\r\nimport { bindActionCreators } from 'redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { actions as loginActions, getUsername, getPassword, isLogin } from '../../redux/modules/login.js';\r\n\r\nclass Login extends Component {\r\n\r\n    render() {\r\n        const { username, password, login } = this.props;\r\n        if (login) {\r\n            return <Redirect to='/user' />\r\n        }\r\n        return (\r\n            <div className=\"login\">\r\n                <LoginHeader />\r\n                <LoginForm\r\n                    username={username}\r\n                    password={password}\r\n                    onChange={this.handleChange}\r\n                    onSubmit={this.handleSumbit}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        if (e.target.name === 'username') {\r\n            this.props.loginActions.setUsername(e.target.value);\r\n        } else if (e.target.name === 'password') {\r\n            this.props.loginActions.setPassword(e.target.value);\r\n        }\r\n    }\r\n\r\n    handleSumbit = () => {\r\n        this.props.loginActions.login();\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    return {\r\n        username: getUsername(state),\r\n        password: getPassword(state),\r\n        login: isLogin(state)\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        loginActions: bindActionCreators(loginActions, dispatch)\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import React, { Component } from 'react';\r\nimport { isLogin } from '../../redux/modules/login.js';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nclass PrivateRoute extends Component {\r\n\r\n    render() {\r\n        const { component: Component, login, ...rest } = this.props;\r\n\r\n        return (\r\n            <Route {...rest}\r\n                render={props => {\r\n                    return login ? (\r\n                        <Component {...props} />\r\n                    ) : (\r\n                        <Redirect\r\n                            to={{\r\n                                pathname: '/login',\r\n                                state: { from: props.location }\r\n                            }}\r\n                        />\r\n                    )\r\n                }}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    return {\r\n        login: isLogin(state)\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(PrivateRoute);\r\n","import React, { Component } from 'react';\r\nimport './index.css';\r\n\r\nclass Tip extends Component {\r\n    render() {\r\n        const { message, onClick } = this.props;\r\n        return (\r\n            <div className=\"tip\">\r\n                <div className=\"tip__alert\">\r\n                    <div className=\"tip__content\">{message}</div>\r\n                    <div className=\"tip__btns\">\r\n                        <a className=\"tip__btn\" onClick={onClick}>确定</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Tip;\r\n","import React, { Component } from 'react';\r\nimport './PurchaseForm.css';\r\n\r\nclass PurchaseForm extends Component {\r\n\r\n    render() {\r\n        const { showTip, quantity, onCounterDec, onCounterInc, onSetQuantity, onSubmit } = this.props;\r\n        return (\r\n            <div className=\"purchaseForm\">\r\n                <div className=\"purchaseForm__wrapper\">\r\n                    <div className=\"purchaseForm__row\">\r\n                        <div className=\"purchaseForm__rowLabel\">数量</div>\r\n                        <div className=\"purchaseForm__rowValue\">\r\n                            <span className=\"purchaseForm__counter--dec\" onClick={onCounterDec}>-</span>\r\n                            <input className=\"purchaseForm__quantity\" value={quantity} type='number' onChange={onSetQuantity}/>\r\n                            <span className=\"purchaseForm__counter--inc\" onClick={onCounterInc}>+</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"purchaseForm__row\">\r\n                        <div className=\"purchaseForm__rowLabel\">小计</div>\r\n                        <div className=\"purchaseForm__rowValue\">{}</div>\r\n                    </div>\r\n                    <div className=\"purchaseForm__row\">\r\n                        <div className=\"purchaseForm__rowLabel\">手机号码</div>\r\n                        <div className=\"purchaseForm__rowValue\">{}</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"purchaseForm__remark\">\r\n                    <div className=\"purchaseForm__remarkItem\">\r\n                        <i className=\"purchaseForm__sign\" />\r\n                        <span className=\"purchaseForm__desc\">支持随时退</span>\r\n                    </div>\r\n                    <div className=\"purchaseForm__remarkItem\">\r\n                        <i className=\"purchaseForm__sign\" />\r\n                        <span className=\"purchaseForm__desc\">支持过期退</span>\r\n                    </div>\r\n                </div>\r\n                <a className=\"purchaseForm__submit\" onClick={onSubmit}>提交订单</a>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PurchaseForm;\r\n","\r\nexport const schema = {\r\n    name: 'orders',\r\n    id: 'id'\r\n}\r\n\r\nconst reducer = (state = {}, action) => {\r\n    if (action.response && action.response.orders) {\r\n        return {\r\n            ...state,\r\n            ...action.response.orders\r\n        };\r\n    }\r\n    switch (action.type) {\r\n        case actionTypes.DELETE_ORDER:\r\n            const { [action.orderId]: deleteOrder, ...restOrders } = state;\r\n            return restOrders;\r\n        case actionTypes.ADD_COMMENT:\r\n            return {\r\n                ...state,\r\n                [action.orderId]: {\r\n                    ...state[action.orderId],\r\n                    commentId: action.commentId\r\n                }\r\n            };\r\n        case actionTypes.ADD_ORDER:\r\n            return {\r\n                ...state,\r\n                [action.orderId]: action.order\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport default reducer;\r\nexport const USED_TYPE = 1; // 已消费\r\nexport const TO_PAY_TYPE = 2;//待消费\r\nexport const AVAILABLE_TYPE = 3;//可使用\r\nexport const REFUND_TYPE = 4;//退款\r\n\r\nexport const getOrderById = (state, id) => {\r\n    return state.entities.orders[id]\r\n}\r\n\r\nexport const actionTypes = {\r\n    DELETE_ORDER: 'ORDER/DELETE_ORDER',\r\n    ADD_COMMENT: 'ORDER/ADD_COMMENT',\r\n    ADD_ORDER: 'ORDER/ADD_ORDER'\r\n}\r\n\r\nlet orderIdCounter = 10;\r\n\r\nexport const actions = {\r\n    deleteOrder: (orderId) => ({\r\n        type: actionTypes.DELETE_ORDER,\r\n        orderId\r\n    }),\r\n    addComment: (orderId, commentId) => ({\r\n        type: actionTypes.ADD_COMMENT,\r\n        orderId,\r\n        commentId\r\n    }),\r\n    addOrder: (order) => {\r\n        const orderId = `o-${orderIdCounter++}`;\r\n        return {\r\n            type: actionTypes.ADD_ORDER,\r\n            orderId,\r\n            order: {...order, id: orderId}\r\n        }\r\n    }\r\n}\r\n","import { actions as orderActions, AVAILABLE_TYPE } from './entities/orders.js';\r\nimport { getProductDetail } from './entities/products.js';\r\nconst initialState = {\r\n    quantity: 0,\r\n    showTip: false\r\n}\r\n\r\nconst actionTypes = {\r\n    SET_ORDER_QUANTITY: 'PURCHASE/SET_ORDER_QUANTITY',\r\n    HIDE_TIP: 'PURCHASE/HIDE_TIP',\r\n    SUBMIT_ORDER_REQUEST: 'PURCHASE/SUBMIT_ORDER_REQUEST',\r\n    SUBMIT_ORDER_SUCCESS: 'PURCHASE/SUBMIT_ORDER_SUCCESS',\r\n    SUBMIT_ORDER_FAILURE: 'PURCHASE/SUBMIT_ORDER_FAILURE'\r\n}\r\n\r\nexport const actions = {\r\n    setOrderQuantity: quantity => ({\r\n        type: actionTypes.SET_ORDER_QUANTITY,\r\n        quantity\r\n    }),\r\n    hideTip: () => ({\r\n        type: actionTypes.HIDE_TIP\r\n    }),\r\n    submitOrder: productId => {\r\n        return (dispatch, getState) => {\r\n            dispatch(submitOrderRequest());\r\n            return new Promise((resolve, reject) => {\r\n                setTimeout(() => {\r\n                    const product = getProductDetail(getState(), productId);\r\n                    console.log('product', product)\r\n                    const quantity = getState().purchase.quantity;\r\n                    const totalPrice = (product.currentPrice * quantity);\r\n                    const text1 = `${quantity}张 | 总价: ${totalPrice}`;\r\n                    const text2 = product.validityPeriod;\r\n                    const order = {\r\n                        title: `${product.shop}:${product.product}`,\r\n                        orderPicUrl: product.picture,\r\n                        channel: '团购',\r\n                        statusText: '待消费',\r\n                        text: [text1, text2],\r\n                        type: AVAILABLE_TYPE\r\n                    }\r\n                    dispatch(orderActions.addOrder(order))\r\n                    dispatch(submitOrderSuccess())\r\n                }, 500);\r\n            })\r\n        }\r\n    }\r\n}\r\nconst submitOrderRequest = () => ({\r\n    type: actionTypes.SUBMIT_ORDER_REQUEST\r\n})\r\nconst submitOrderSuccess = () => ({\r\n    type: actionTypes.SUBMIT_ORDER_SUCCESS\r\n})\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.SET_ORDER_QUANTITY:\r\n            return { ...state, quantity: action.quantity };\r\n        case actionTypes.SUBMIT_ORDER_SUCCESS:\r\n            return { ...state, showTip: true };\r\n        case actionTypes.HIDE_TIP:\r\n            return { ...state, showTip: false }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport default reducer;\r\n\r\nexport const getShowTip = (state) => {\r\n    return state.purchase.showTip;\r\n}\r\nexport const getQuantity = (state) => {\r\n    return state.purchase.quantity;\r\n}\r\nexport const getProduct = (state, productId) => {\r\n    return getProductDetail(state, productId)\r\n}\r\n","import React, { Component } from 'react';\r\nimport './index.css';\r\nimport Header from '../../components/Header';\r\nimport Tip from '../../components/Tip';\r\nimport PurchaseForm from './components/PurchaseForm.js';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { actions as purchaseActions, getProduct, getShowTip, getQuantity } from '../../redux/modules/purchase.js';\r\nimport { actions as detailActions } from '../../redux/modules/detail.js';\r\n\r\nclass Purchase extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"purchase\">\r\n                <Header title=\"下单\" onBack={this.handleBack}/>\r\n                <PurchaseForm\r\n                    quantity={this.props.quantity}\r\n                    onCounterDec={this.handleCounterDec}\r\n                    onCounterInc={this.handleCounterInc}\r\n                    showTip={this.props.showTip}\r\n                    onSetQuantity={this.handleSetQuantity}\r\n                    onSubmit={this.handleSubmit}\r\n                />\r\n                {this.props.showTip ? <Tip message=\"购买成功\" onClick={this.handleTipClick}/> : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleBack = () => {\r\n        this.props.history.goBack()\r\n    }\r\n    handleTipClick = () => {\r\n        this.props.purchaseActions.hideTip()\r\n        this.props.history.goBack()\r\n    }\r\n    handleCounterDec = () => {\r\n        const { quantity } = this.props;\r\n        this.props.purchaseActions.setOrderQuantity(quantity - 1)\r\n    }\r\n    handleCounterInc = () => {\r\n        const { quantity } = this.props;\r\n        this.props.purchaseActions.setOrderQuantity(quantity + 1)\r\n    }\r\n    handleSetQuantity = () => {\r\n        const { quantity } = this.props;\r\n        this.props.purchaseActions.setOrderQuantity(quantity)\r\n    }\r\n    handleSubmit = () => {\r\n        const productId = this.props.match.params.id;\r\n        console.log('productId', productId)\r\n        this.props.purchaseActions.submitOrder(productId)\r\n    }\r\n    componentDidMount = () => {\r\n        if (!this.props.product) {\r\n            const productId = this.props.match.params.id;\r\n            this.props.detailActions.loadProductDetail(productId)\r\n        }\r\n    }\r\n    componentWillUnmount = () => {\r\n        this.props.purchaseActions.setOrderQuantity(1)\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    const productId = props.match.params.id;\r\n    console.log('showTip', getShowTip(state))\r\n    return {\r\n        quantity: getQuantity(state),\r\n        showTip: getShowTip(state),\r\n        product: getProduct(state, productId)\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        purchaseActions: bindActionCreators(purchaseActions, dispatch),\r\n        detailActions: bindActionCreators(detailActions, dispatch)\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Purchase);\r\n","import React, { Component } from 'react';\r\nimport './UserHeader.css';\r\n\r\nclass UserHeader extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"userHeader\">\r\n                <div className=\"userHeader__back\" onClick={this.handleClickBack}>首页</div>\r\n                <div className=\"userHeader__list\">\r\n                    <span className=\"userHeader__item userHeader__item--selected\">订单</span>\r\n                    <span className=\"userHeader__item\">抵用券</span>\r\n                </div>\r\n                <div className=\"userHeader__right\" onClick={this.handleClickLogout}>注销</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleClickBack = () => {\r\n        this.props.onBack()\r\n    }\r\n    handleClickLogout = () => {\r\n        this.props.onLogout()\r\n    }\r\n}\r\n\r\nexport default UserHeader;\r\n","import React, { Component } from 'react';\r\nimport './OrderItem.css';\r\n\r\nclass OrderItem extends Component {\r\n\r\n    render() {\r\n        console.log('isCommenting', this.props.isCommenting)\r\n        const {\r\n            data,\r\n            onRemove,\r\n            onComment,\r\n            isCommenting\r\n        } = this.props;\r\n        return (\r\n            <div className=\"orderItem\">\r\n                <div className=\"orderItem__title\">\r\n                    <span>{data.title}</span>\r\n                </div>\r\n                <div className=\"orderItem__main\">\r\n                    <div className=\"orderItem__imgWrapper\">\r\n                        <div className=\"orderItem__tag\">{data.statusText}</div>\r\n                        <img alt={data.title} src={data.orderPicUrl} className=\"orderItem__img\"/>\r\n                    </div>\r\n                    <div className=\"orderItem__content\">\r\n                        <div className=\"orderItem__line\">{data.text[0]}</div>\r\n                        <div className=\"orderItem__line\">{data.text[1]}</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"orderItem__bottom\">\r\n                    <div className=\"orderItem__type\">{data.channel}</div>\r\n                    <div>\r\n                        {data.type === 1 && !data.commentId ? <div className=\"orderItem__btn\" onClick={onComment}>评价</div> : null}\r\n                        <div className=\"orderItem__btn\" onClick={onRemove}>删除</div>\r\n                    </div>\r\n                </div>\r\n                {isCommenting ? this.renderEditArea() : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderEditArea = () => {\r\n        const {\r\n            comment,\r\n            onCancelComment,\r\n            onSubmitComment\r\n        } = this.props;\r\n        return (\r\n            <div className=\"orderItem__commentContainer\">\r\n                <textarea\r\n                    className=\"orderItem__comment\"\r\n                    value={comment}\r\n                    onChange={this.handleCommentChange}\r\n                />\r\n                {this.renderStar()}\r\n                <button\r\n                    className=\"orderItem__commentBtn\"\r\n                    onClick={onSubmitComment}\r\n                >\r\n                    提交\r\n                </button>\r\n                <button\r\n                    className=\"orderItem__commentBtn\"\r\n                    onClick={onCancelComment}\r\n                >\r\n                    删除\r\n                </button>\r\n            </div>\r\n        )\r\n    }\r\n    renderStar = () => {\r\n        const { stars, onStarsChange } = this.props;\r\n        return (\r\n            <div>\r\n                {[1, 2, 3, 4, 5].map(item => {\r\n                    const lightClass = stars >= item ? \"orderItem__star--light\" : \"\";\r\n                    return (\r\n                        <span\r\n                            className={\"orderItem__star\" + lightClass}\r\n                            key={item}\r\n                            onClick={this.handleStarsChange.bind(this, item)}\r\n                        >\r\n                            ★\r\n                        </span>\r\n                    )\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n    handleCommentChange = (e) => {\r\n        this.props.onCommentChange(e.target.value)\r\n    }\r\n    handleStarsChange = (stars) => {\r\n        this.props.onStarsChange(stars)\r\n    }\r\n}\r\nexport default OrderItem;\r\n","import React, { Component } from 'react';\r\nimport './index.css';\r\n\r\nclass Confirm extends Component {\r\n    render() {\r\n        const { content, cancelText, confirmText, onCancel, onConfirm } = this.props;\r\n        return (\r\n            <div className=\"confirm\">\r\n                <div className=\"confirm__alert\">\r\n                    <div className=\"confirm__content\">{content}</div>\r\n                    <div className=\"confirm__btns\">\r\n                        <a className=\"confirm__btn\" onClick={onCancel}>{cancelText}</a>\r\n                        <a className=\"confirm__btn\" onClick={onConfirm}>{confirmText}</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Confirm;\r\n","\r\nexport const schema = {\r\n    name: \"comments\",\r\n    id: 'id'\r\n}\r\nconst reducer = (state = {}, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.ADD_COMMENT:\r\n            return {\r\n                ...state,\r\n                [action.commentObj.id]: action.comment\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default reducer;\r\n\r\nconst actionTypes = {\r\n    ADD_COMMENT: 'COMMENTS/ADD_COMMENT'\r\n}\r\n\r\nexport const actions = {\r\n    addComment: (commentObj) => ({\r\n        type: actionTypes.ADD_COMMENT,\r\n        commentObj\r\n    })\r\n}\r\n","import url from '../../utils/url.js';\r\nimport {\r\n    schema,\r\n    TO_PAY_TYPE,\r\n    AVAILABLE_TYPE,\r\n    REFUND_TYPE,\r\n    getOrderById,\r\n    actions as orderActions,\r\n    actionTypes as orderTypes,\r\n} from './entities/orders.js';\r\nimport { actions as commentActions } from './entities/comments.js';\r\nimport { combineReducers } from 'redux';\r\nimport { FETCH_DATA } from '../middleware/api.js';\r\n\r\nconst typeToKey = {\r\n    [TO_PAY_TYPE]: 'toPayIds',\r\n    [AVAILABLE_TYPE]: 'availableIds',\r\n    [REFUND_TYPE]: 'refundIds'\r\n}\r\n//1定义state\r\nconst initialState = {\r\n    orders: {\r\n        isFetching: false,\r\n        ids: [],\r\n        toPayIds: [],\r\n        availableIds: [],\r\n        refundIds: []\r\n    },\r\n    currentTab: 0,\r\n    currentOrder: {\r\n        id: null,\r\n        isDeleting: false,//弹出删除提示框期间为true\r\n        isCommenting: false,//编辑评论（打开评论框）时为true\r\n        comment: '',\r\n        stars: 0\r\n    }\r\n}\r\n//2定义action\r\nconst actionTypes = {\r\n    //获取订单列表\r\n    FETCH_ORDERS_REQUEST: 'USER/FETCH_ORDERS_REQUEST',\r\n    FETCH_ORDERS_SUCCESS: 'USER/FETCH_ORDERS_SUCCESS',\r\n    FETCH_ORDERS_FAILURE: 'USER/FETCH_ORDERS_FAILURE',\r\n    //设置当前选中的tab\r\n    SET_CURRENT_TAB: 'USER/SET_CURRENT_TAB',\r\n    //删除订单\r\n    DELETE_ORDERS_REQUEST: 'USER/DELETE_ORDER_REQUEST',\r\n    DELETE_ORDERS_SUCCESS: 'USER/DELETE_ORDER_SUCCESS',\r\n    DELETE_ORDERS_FAILURE: 'USER/DELETE_ORDER_FAILURE',\r\n    SHOW_DELETE_DIALOG: 'USER/SHOW_DELETE_DIALOG',\r\n    HIDE_DELETE_DIALOG: 'USER/HIDE_DELETE_DIALOG',\r\n    //评论订单\r\n    SHOW_COMMENT_AREA: 'USER/SHOW_COMMENT_AREA',\r\n    HIDE_COMMENT_AREA: 'USER/HIDE_COMMENT_AREA',\r\n    SET_COMMENT: 'USER/SET_COMMENT',\r\n    SET_STARS: 'USER/SET_STARS',\r\n    //提交评论\r\n    POST_COMMENT_REQUEST: 'USER/POST_COMMENT_REQUEST',\r\n    POST_COMMENT_SUCCESS: 'USER/POST_COMMENT_SUCCESS',\r\n    POST_COMMENT_FAILURE: 'USER/POST_COMMENT_FAILURE'\r\n}\r\n\r\n\r\nexport const actions = {\r\n    loadOrders: () => {\r\n        return (dispatch, getState) => {\r\n            const ids = getState().user.orders.ids;\r\n            if (ids && ids.length > 0) {\r\n                return null;\r\n            }\r\n            const endpoint = url.getOrders();\r\n            return dispatch(fetchOrders(endpoint));\r\n        }\r\n    },\r\n    setCurrentTab: index => ({\r\n        type: actionTypes.SET_CURRENT_TAB,\r\n        index\r\n    }),\r\n    //显示删除对话框\r\n    showDeleteDialog: orderId => ({\r\n        type: actionTypes.SHOW_DELETE_DIALOG,\r\n        orderId\r\n    }),\r\n    removeOrders: () => {\r\n        return (dispatch, getState) => {\r\n            const { id } = getState().user.currentOrder;\r\n            dispatch(deleteOrderRequest());\r\n            return new Promise((resolve, reject) => {\r\n                setTimeout(() => {\r\n                    dispatch(deleteOrderSuccess(id));\r\n                    dispatch(orderActions.deleteOrder(id));\r\n                    resolve();\r\n                },500)\r\n            })\r\n        }\r\n    },\r\n    hideDeleteDialog: () => ({\r\n        type: actionTypes.HIDE_DELETE_DIALOG,\r\n    }),\r\n    //评论功能相关actionCreator\r\n    showCommentArea: (orderId) => ({\r\n        type: actionTypes.SHOW_COMMENT_AREA,\r\n        orderId\r\n    }),\r\n    hideCommentArea: () => ({\r\n        type: actionTypes.HIDE_COMMENT_AREA\r\n    }),\r\n    setComment: comment => ({\r\n        type: actionTypes.SET_COMMENT,\r\n        comment\r\n    }),\r\n    setStars: stars => ({\r\n        type: actionTypes.SET_STARS,\r\n        stars\r\n    }),\r\n    submitComment: () => {\r\n        return (dispatch, getState) => {\r\n            dispatch(postCommentRequest());\r\n            return new Promise((resolve, reject) => {\r\n                setTimeout(() => {\r\n                    const { id, stars, comment } = getState().user.currentOrder;\r\n                    const commentObj = {\r\n                        id: new Date(),\r\n                        stars,\r\n                        content: comment\r\n                    }\r\n                    dispatch(postCommentSuccess());\r\n                    dispatch(commentActions.addComment(commentObj))\r\n                    dispatch(orderActions.addComment(id, commentObj.id))\r\n                    resolve();\r\n                }, 500)\r\n            });\r\n        }\r\n    }\r\n}\r\nconst postCommentRequest = () => ({\r\n    type: actionTypes.POST_COMMENT_REQUEST\r\n})\r\n\r\nconst postCommentSuccess = () => ({\r\n    type: actionTypes.POST_COMMENT_SUCCESS\r\n})\r\nconst deleteOrderRequest = () => ({\r\n    type: actionTypes.DELETE_ORDERS_REQUEST\r\n})\r\n\r\nconst deleteOrderSuccess = id => ({\r\n    type: actionTypes.DELETE_ORDERS_SUCCESS,\r\n    orderId: id\r\n})\r\n\r\nconst fetchOrders = endpoint => ({\r\n    [FETCH_DATA]: {\r\n        types: [\r\n            actionTypes.FETCH_ORDERS_REQUEST,\r\n            actionTypes.FETCH_ORDERS_SUCCESS,\r\n            actionTypes.FETCH_ORDERS_FAILURE\r\n        ],\r\n        schema,\r\n        endpoint\r\n    }\r\n})\r\n\r\n//3定义reducer\r\nconst orders = (state = initialState.orders, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.FETCH_ORDERS_REQUEST:\r\n            return { ...state, isFetching: true };\r\n        case actionTypes.FETCH_ORDERS_SUCCESS:\r\n            const toPayIds = action.response.ids.filter(\r\n                id => action.response.orders[id].type === TO_PAY_TYPE\r\n            )\r\n            const availabelIds = action.response.ids.filter(\r\n                id => action.response.orders[id].type === AVAILABLE_TYPE\r\n            )\r\n            const refundIds = action.response.ids.filter(\r\n                id => action.response.orders[id].type === REFUND_TYPE\r\n            )\r\n            return {\r\n                ...state,\r\n                isFetching: false,\r\n                ids: state.ids.concat(action.response.ids),\r\n                toPayIds: state.toPayIds.concat(toPayIds),\r\n                availableIds: state.availableIds.concat(availabelIds),\r\n                refundIds: state.refundIds.concat(refundIds)\r\n            };\r\n        case orderTypes.DELETE_ORDER:\r\n        case actionTypes.DELETE_ORDERS_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ids: removeOrderId(state, 'ids', action.orderId),\r\n                toPayIds: removeOrderId(state, 'toPayIds', action.orderId),\r\n                availableIds: removeOrderId(state, 'availableIds', action.orderId),\r\n                refundIds: removeOrderId(state, 'refundIds', action.orderId)\r\n            }\r\n        case orderTypes.ADD_ORDER:\r\n            const key = typeToKey[action.order.type]\r\n            console.log('key', key)\r\n            console.log('state[key]', state[key])\r\n            return {\r\n                ids: state.ids.concat(action.order.id),\r\n                [key]: state[key].concat(action.order.id)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nconst removeOrderId = (state, key, id) => {\r\n    return state[key].filter(item => {\r\n        return item !== id;\r\n    });\r\n}\r\n\r\nconst currentOrder = (state = initialState.currentOrder, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.SHOW_DELETE_DIALOG:\r\n            return { ...state, isDeleting: true, id: action.orderId };\r\n        case actionTypes.SHOW_COMMENT_AREA:\r\n            return { ...state, isCommenting: true, id: action.orderId };\r\n        case actionTypes.HIDE_DELETE_DIALOG:\r\n        case actionTypes.DELETE_ORDERS_FAILURE:\r\n        case actionTypes.DELETE_ORDERS_SUCCESS:\r\n        case actionTypes.HIDE_COMMENT_AREA:\r\n        case actionTypes.POST_COMMENT_SUCCESS:\r\n        case actionTypes.POST_COMMENT_FAILURE:\r\n            return { ...state, isDeleting: false, id: initialState.currentOrder };\r\n        case actionTypes.SET_COMMENT:\r\n            return { ...state, comment: action.comment };\r\n        case actionTypes.SET_STARS:\r\n            return { ...state, stars: action.stars };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nconst currentTab = (state = initialState.currentTab, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.SET_CURRENT_TAB:\r\n            return action.index;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst reducer = combineReducers({\r\n    currentTab,\r\n    orders,\r\n    currentOrder\r\n})\r\nexport default reducer;\r\n\r\nexport const getOrders = (state) => {\r\n    const key = ['ids', 'toPayIds', 'availableIds', 'refundIds'][state.user.currentTab];\r\n    return state.user.orders[key].map(id => {\r\n        return getOrderById(state, id)\r\n    })\r\n}\r\n\r\nexport const getCurrentTab = (state) => {\r\n    return state.user.currentTab;\r\n}\r\n\r\nexport const getIsDeleting = (state) => {\r\n    return state.user.currentOrder.isDeleting;\r\n}\r\n\r\nexport const getCommentingOrderId = (state) => {\r\n    return state.user.currentOrder ? state.user.currentOrder.id : 0;\r\n}\r\n\r\nexport const getStars = (state) => {\r\n    return state.user.currentOrder ? state.user.currentOrder.stars : 0;\r\n}\r\n\r\nexport const getComment = (state) => {\r\n    return state.user.currentOrder ? state.user.currentOrder.comment : '';\r\n}\r\n","import React, { Component } from 'react';\r\nimport OrderItem from '../components/OrderItem.js';\r\nimport Confirm from '../../../components/Confirm';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport {\r\n    actions as userActions,\r\n    getIsDeleting,\r\n    getCurrentTab,\r\n    getCommentingOrderId,\r\n    getStars,\r\n    getComment\r\n} from '../../../redux/modules/user.js';\r\nimport './UserMain.css';\r\n\r\nconst tabTitles = [\"全部订单\", \"待付款\", \"可使用\", \"退款/售后\"];\r\n\r\nclass UserMain extends Component {\r\n    render() {\r\n        const { data, currentTab, isDeleting } = this.props;\r\n        return (\r\n            <div>\r\n                <div className=\"userMain__menu\">\r\n                    {tabTitles.map((item, index) => {\r\n                        return (\r\n                            <div className=\"userMain__tab\" key={index} onClick={this.handleClickTab.bind(this, index)}>\r\n                                <span className={\r\n                                    currentTab === index ? \"userMain__title userMain__title--active\" : \"userMain__title\"\r\n                                }>\r\n                                    {item}\r\n                                </span>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n                <div className=\"userMain__content\">\r\n                    {data && data.length > 0 ? this.renderOrderList(data) : this.renderEmpty()}\r\n                </div>\r\n                {isDeleting ? this.renderConfirmDialog() : null}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderConfirmDialog = () => {\r\n        const {\r\n            hideDeleteDialog,\r\n            removeOrders,\r\n        } = this.props.userActions;\r\n        return (\r\n            <Confirm\r\n                content={`确定删除订单吗`}\r\n                cancelText={`取消`}\r\n                confirmText={`确定`}\r\n                onCancel={hideDeleteDialog}\r\n                onConfirm={removeOrders}\r\n            />\r\n        )\r\n    }\r\n\r\n    handleClickTab = (index) => {\r\n        this.props.userActions.setCurrentTab(index)\r\n    }\r\n\r\n    renderOrderList = data => {\r\n        const { commentingOrderId, comment, stars } = this.props;\r\n        const {\r\n            userActions: {\r\n                showDeleteDialog,\r\n                showCommentArea,\r\n                hideCommentArea,\r\n                setComment,\r\n                setStars,\r\n                submitComment,\r\n            }\r\n        } = this.props;\r\n        return data.map((item, index) => {\r\n            return (\r\n                <OrderItem\r\n                    key={item.id}\r\n                    data={item}\r\n                    isCommenting={item.id === commentingOrderId}\r\n                    comment={comment}\r\n                    stars={stars}\r\n                    onRemove={showDeleteDialog.bind(this, item.id)}\r\n                    onComment={showCommentArea.bind(this, item.id)}\r\n                    onCommentChange={setComment}\r\n                    onStarsChange={setStars}\r\n                    onSubmitComment={submitComment}\r\n                    onCancelComment={hideCommentArea}\r\n                />\r\n            )\r\n        })\r\n    }\r\n    renderEmpty = () => {\r\n        return (\r\n            <div className=\"userMain__empty\">\r\n              <div className=\"userMain__emptyIcon\"/>\r\n              <div className=\"userMain__emptyText1\">您还没有相关订单</div>\r\n              <div className=\"userMain__emptyText2\">去逛逛看有哪些想买的</div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    return {\r\n        currentTab: getCurrentTab(state),\r\n        isDeleting: getIsDeleting(state),\r\n        commentingOrderId: getCommentingOrderId(state),\r\n        comment: getComment(state),\r\n        stars: getStars(state)\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        userActions: bindActionCreators(userActions, dispatch)\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserMain);\r\n","import React, { Component } from 'react';\r\nimport UserHeader from './components/UserHeader.js';\r\nimport UserMain from './containers/UserMain.js';\r\nimport { actions as userActions, getCurrentTab, getOrders } from '../../redux/modules/user.js';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { actions as loginActions } from '../../redux/modules/login.js';\r\n\r\nclass User extends Component {\r\n\r\n    render() {\r\n        const { orders, currentTab } = this.props;\r\n        return (\r\n            <div>\r\n                <UserHeader onBack={this.handleBack} onLogout={this.handleLogout}/>\r\n                <UserMain data={orders} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleSetCurrentTab = (index) => {\r\n        this.props.userActions.setCurrentTab(index)\r\n    }\r\n    componentDidMount() {\r\n        this.props.userActions.loadOrders()\r\n    }\r\n    handleBack = () => {\r\n        this.props.history.push('/')\r\n    }\r\n    handleLogout = () => {\r\n        this.props.loginActions.logout()\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    return {\r\n        orders: getOrders(state)\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        userActions: bindActionCreators(userActions, dispatch),\r\n        loginActions: bindActionCreators(loginActions, dispatch)\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(User);\r\n","import React, { Component } from 'react';\nimport ErrorToast from '../../components/ErrorToast';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { getError, actions as appActions } from '../../redux/modules/app.js';\nimport Home from '../Home';\nimport ProductDetail from '../ProductDetail';\nimport Search from '../Search';\nimport SearchResult from '../SearchResult';\nimport Login from '../Login';\nimport PrivateRoute from '../PrivateRoute';\nimport Purchase from '../Purchase';\nimport User from '../User';\nimport './index.css';\n\nclass App extends Component {\n    render() {\n        const {\n            error,\n            appActions: {clearError}\n        } = this.props;\n        return (\n                <div className=\"APP\">\n                    <Router>\n                        <Switch>\n                            <Route path='/detail/:id' component={ProductDetail} />\n                            <PrivateRoute path='/user' component={User} />\n                            <Route path='/search' component={Search} />\n                            <Route path='/search_result' component={SearchResult} />\n                            <Route path='/login' component={Login} />\n                            <PrivateRoute path='/purchase/:id' component={Purchase} />\n                            <Route path='/' component={Home} />\n                        </Switch>\n                    </Router>\n                    {error ? <ErrorToast msg={error} clearError={clearError} /> : null}\n                </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        error: getError(state)\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        appActions: bindActionCreators(appActions, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import { combineReducers } from 'redux';\r\nimport comments from './comments.js';\r\nimport products from './products.js';\r\nimport orders from './orders.js';\r\nimport shops from './shops.js';\r\nimport keywords from './keywords.js';\r\n\r\nconst reducer = combineReducers({\r\n    comments,\r\n    products,\r\n    orders,\r\n    shops,\r\n    keywords\r\n})\r\n\r\nexport default reducer;\r\n","//combineReducer\r\nimport { combineReducers } from 'redux';\r\nimport app from './app.js';\r\nimport detail from './detail.js';\r\nimport home from './home.js';\r\nimport entities from './entities';\r\nimport search from './search.js';\r\nimport login from './login.js';\r\nimport user from './user.js';\r\nimport purchase from './purchase.js';\r\n\r\nconst rootReducer = combineReducers({\r\n    entities,\r\n    home,\r\n    detail,\r\n    app,\r\n    search,\r\n    login,\r\n    user,\r\n    purchase\r\n});\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport api from \"./middleware/api\";\r\nimport rootReducer from \"./modules\";\r\n\r\nlet store;\r\n\r\nif (\r\n  process.env.NODE_ENV !== \"production\" &&\r\n  window.__REDUX_DEVTOOLS_EXTENSION__\r\n) {\r\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;\r\n  store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk, api)));\r\n} else {\r\n  store = createStore(rootReducer, applyMiddleware(thunk, api));\r\n}\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport App from \"./containers/App\";\nimport store from \"./redux/store\";\nimport './index.css';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}