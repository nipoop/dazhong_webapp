(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(39).concat([function(e,t,n){e.exports=n(98)},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),s=n.n(c),i=n(9),o=n(1),l=n(2),u=n(4),m=n(3),p=n(5),d=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.message;return r.a.createElement("div",{className:"errorToast"},r.a.createElement("div",{className:"errorToast_text"},e))}},{key:"componentDidMount",value:function(){var e=this;this.timer=setTimeout(function(){e.props.clearError()},3e3)}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}}]),t}(a.Component),h=d,_=n(11),f=n(19),E=n(7),v=n(6),b="APP/CLEAR_ERROR",O={clearError:function(){return{type:b}}},y={error:null},g=function(e){return e.app.error},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;switch((arguments.length>1?arguments[1]:void 0).type){case"APP/CLEAR_ERROR":return Object(v.a)({},e,{error:null});default:return e}},N=n(26),C=n.n(N),w=(n(63),[[{name:"\u732b\u773c\u7535\u5f71",src:"https://www.dpfile.com/sc/eleconfig/20170223152109dp_wx_maoyan_icon.png"},{name:"\u9152\u5e97",src:"https://www.dpfile.com/sc/eleconfig/20160126203337jiudian.png"},{name:"\u4f11\u95f2\u5a31\u4e50",src:"https://www.dpfile.com/sc/eleconfig/20160126202841xiuxianyule.png"},{name:"\u5916\u5356",src:"https://www.dpfile.com/sc/eleconfig/20160126203251waimai.png"},{name:"\u706b\u9505",src:"https://www.dpfile.com/sc/eleconfig/20160204172927huoguo.png"},{name:"\u7f8e\u98df",src:"https://www.dpfile.com/sc/eleconfig/20160126194705meishi.png"},{name:"\u4e3d\u4eba",src:"https://www.dpfile.com/sc/eleconfig/20160126202946liren.png"},{name:"\u4f11\u95f2\u5a31\u4e50",src:"https://www.dpfile.com/sc/eleconfig/20160126203542ktv.png"},{name:"KTV",src:"https://www.dpfile.com/sc/eleconfig/20160126203440zhoubianyou.png"},{name:"\u5a5a\u7eb1\u6444\u5f71",src:"https://www.dpfile.com/sc/eleconfig/20160126203830jiehun.png"}],[{name:"\u751f\u6d3b\u670d\u52a1",src:"https://www.dpfile.com/sc/eleconfig/20170308125500community_new.png"},{name:"\u666f\u70b9",src:"https://www.dpfile.com/sc/eleconfig/20160126205135jingguan.png"},{name:"\u7231\u8f66",src:"https://www.dpfile.com/sc/eleconfig/20160126203742aiche.png"},{name:"\u8fd0\u52a8\u5065\u8eab",src:"https://www.dpfile.com/sc/eleconfig/20160126203617jianshen.png"},{name:"\u8d2d\u7269",src:"https://www.dpfile.com/sc/eleconfig/20160314121215icongouwu135.png"},{name:"\u4eb2\u5b50",src:"https://www.dpfile.com/sc/eleconfig/20160126203905qinzi.png"},{name:"\u5230\u5bb6",src:"https://www.dpfile.com/sc/eleconfig/20160126203812daojia.png"},{name:"\u5bb6\u88c5",src:"https://www.dpfile.com/sc/eleconfig/20161213162031zhuangxiu.png"},{name:"\u5b66\u4e60\u57f9\u8bad",src:"https://www.dpfile.com/gp/cms/1455525720807.png"},{name:"\u533b\u7597\u5065\u5eb7",src:"https://www.dpfile.com/sc/eleconfig/20160126204327yiliao.png"}],[{name:"\u5c0f\u5403\u5feb\u9910",src:"https://www.dpfile.com/sc/eleconfig/20160204173331xiaochikuaican.png"},{name:"\u81ea\u52a9\u9910",src:"https://www.dpfile.com/sc/eleconfig/20160204173511zizhucan.png"},{name:"\u65e5\u672c\u83dc",src:"https://www.dpfile.com/sc/eleconfig/20160415121719rihanliaoli.png"},{name:"\u7f8e\u53d1",src:"https://www.dpfile.com/sc/eleconfig/20160316142804meifa.png"},{name:"\u7f8e\u7532\u7f8e\u77b3",src:"https://www.dpfile.com/sc/eleconfig/20160316143047meijia.png"},{name:"\u7f8e\u5bb9SPA",src:"https://www.dpfile.com/sc/eleconfig/20160316143239meirong.png"},{name:"\u7626\u8eab",src:"https://www.dpfile.com/sc/eleconfig/20160316143316shoushen.png"},{name:"\u4eb2\u5b50\u6444\u5f71",src:"https://www.dpfile.com/sc/eleconfig/20160316143612qinzisheying.png"},{name:"\u4eb2\u5b50\u5a31\u4e50",src:"https://www.dpfile.com/sc/eleconfig/20160316143656qinziyoule.png"},{name:"\u5168\u90e8\u5206\u7c7b",src:"https://www.dpfile.com/sc/eleconfig/20160125182200more.png"}]]),k=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"category"},r.a.createElement(C.a,{dots:!0,arrows:!1,slidesToShow:1,swipeToSlide:!0,autoplay:!0},w.map(function(e,t){return r.a.createElement("div",{key:t},e.map(function(e,t){return r.a.createElement("div",{className:"category__section",key:t},r.a.createElement("img",{className:"category__icon",src:e.src}),r.a.createElement("div",null,r.a.createElement("span",{className:"category__text"},e.name)))}))})))}}]),t}(a.Component),T=k,S=(n(64),[{pic:"https://p1.meituan.net/gpa/5ee6d6d00d942804557c73abff79b855116489.jpg%40100w_100h_1e_1c_1l%7Cwatermark%3D1%26%26r%3D1%26p%3D9%26x%3D20%26y%3D20",title:"\u7cbe\u9009\u4e13\u9898\uff1a2017\u597d\u7269\u76d8\u70b9",url:"https://h5.dianping.com/app/h5-ranklist-static/list_nearby.html?collectionId=227&source=weixinM"},{pic:"https://p0.meituan.net/gpa/387438cef7e2bb9eff5b701dde173f27268549.png%40100w_100h_1e_1c_1l%7Cwatermark%3D1%26%26r%3D1%26p%3D9%26x%3D20%26y%3D20",title:"\u4e0d\u6bd4\u51fa\u56fd\u5dee\uff0c\u77ed\u5047\u671f\u9009\u8fd9\u4e9b\u5730\u65b9\u73a9\uff01\u5f53\u5929\u90fd\u6765\u5f97\u53ca\u53bb\u54e6\uff5e",url:"https://h5.dianping.com/app/h5-ranklist-static/list_nearby.html?headlineId=394055&source=weixinM"},{pic:"https://p1.meituan.net/gpa/fbd325713d43366810452c38fc0e32e1945185.png%40100w_100h_1e_1c_1l%7Cwatermark%3D1%26%26r%3D1%26p%3D9%26x%3D20%26y%3D20",title:"\u5413\u5230\u817f\u8f6f\uff0112\u6761\u6050\u6016\u73bb\u7483\u6808\u9053\uff0c\u6562\u53bb\u5417\uff1f",url:"https://h5.dianping.com/app/h5-ranklist-static/list_nearby.html?headlineId=484549&source=weixinM"}]),I=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"headline"},r.a.createElement("div",{className:"headline__logo"}),r.a.createElement("div",{className:"headline__slider"},r.a.createElement(C.a,{slidesToShow:1,swipeToSlide:!0,autoplay:!0,vertical:!0},S.map(function(e,t){return r.a.createElement("a",{key:t,href:e.url,className:"headline__sliderInner"},r.a.createElement("div",{className:"headline__sliderTitle"},e.title),r.a.createElement("div",{className:"headline__sliderImgWrapper"},r.a.createElement("img",{className:"headline__sliderImg",src:e.pic})))}))))}}]),t}(a.Component),A=I,D=(n(65),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data;return r.a.createElement("div",{className:"discount"},r.a.createElement("div",{className:"discount__header"},r.a.createElement("a",null,r.a.createElement("span",{className:"discount__title"},"\u8d85\u503c\u7279\u60e0"),r.a.createElement("span",{className:"discount__more"},"\u66f4\u591a\u4f18\u60e0"),r.a.createElement("span",{className:"discount__arrow"}))),r.a.createElement("div",{className:"discount__content"},e.map(function(e,t){return r.a.createElement(_.b,{to:"/detail/".concat(e.id),key:e.id,className:"discount__item"},r.a.createElement("div",{className:"discount__itemPic"},r.a.createElement("img",{src:e.picture,width:"100%",height:"100%"})),r.a.createElement("div",{className:"discount__itemTitle"},e.product),r.a.createElement("div",{className:"discount__itemPriceWrapper"},r.a.createElement("ins",{className:"discount__itemCurrentPrice"},e.currentPrice),r.a.createElement("del",{className:"discount__itemOldPrice"},e.oldPrice)))})))}}]),t}(a.Component)),R=D,F=n(16),H=(n(67),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.id,n=e.shop,a=e.tag,c=e.picture,s=e.product,i=e.currentPrice,o=e.oldPrice,l=e.saleDesc;return r.a.createElement(_.b,{to:"/detail/".concat(t),className:"likeItem"},r.a.createElement("div",{className:"likeItem__picContainer"},r.a.createElement("div",{className:"likeItem__picTag"},a),r.a.createElement("img",{className:"likeItem__pic",src:c})),r.a.createElement("div",{className:"likeItem__content"},r.a.createElement("div",{className:"likeItem__shop"},n),r.a.createElement("div",{className:"likeItem__product"},s),r.a.createElement("div",{className:"likeItem__detail"},r.a.createElement("div",{className:"likeItem__price"},r.a.createElement("div",{className:"likeItem__currentPrice"},i),r.a.createElement("div",{className:"likeItem__oldPrice"},o)),r.a.createElement("div",{className:"likeItem__sale"},l))))}}]),t}(a.Component)),L=H,U=(n(68),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"loading__img"}),r.a.createElement("span",null,"\u6b63\u5728\u52a0\u8f7d..."))}}]),t}(a.Component)),P=U,x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=null;return function(){n||(n=setTimeout(function(){console.log("get in timeout"),e(),clearTimeout(n),n=null},t))}},M=(n(69),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).throttleFetchLikes=x(n.props.fetchLikes),n.myRef=r.a.createRef(),n.handleScroll=n.handleScroll.bind(Object(F.a)(n)),n.removeListener=!1,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.pageCount;return r.a.createElement("div",{className:"likeList",ref:this.myRef},r.a.createElement("div",{className:"likeList__header"},"\u731c\u4f60\u559c\u6b22"),r.a.createElement("div",{className:"likeList__list"},t.map(function(e,t){return r.a.createElement(L,{key:t,data:e})})),r.a.createElement("div",{className:""},n<3?r.a.createElement(P,null):r.a.createElement("div",{className:"likeList__viewAll"},"\u67e5\u770b\u66f4\u591a")))}},{key:"componentDidMount",value:function(){this.props.pageCount<3?document.addEventListener("scroll",this.handleScroll):this.removeListener=!0,0===this.props.pageCount&&this.props.fetchLikes()}},{key:"componentDidUpdate",value:function(){this.props.pageCount>=3&&(document.removeEventListener("scroll",this.handleScroll),this.removeListener=!0)}},{key:"componentWillUnmount",value:function(){this.removeListener||document.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.clientHeight;e>=this.myRef.current.offsetTop+this.myRef.current.offsetHeight-t-10&&this.props.pageCount<3&&this.throttleFetchLikes()}}]),t}(a.Component)),K=M,B=(n(70),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"homeHeader"},r.a.createElement("header",{className:"homeHeader__wrapper"},r.a.createElement("a",{className:"homeHeader__city"},"\u5317\u4eac"),r.a.createElement(_.b,{to:"/search",className:"homeHeader__search"},"\u8f93\u5165\u5546\u6237\u540d\u3001\u5730\u70b9"),r.a.createElement(_.b,{to:"/user",className:"homeHeader__self"},r.a.createElement("div",{className:"homeHeader__portrait"}))))}}]),t}(a.Component)),q=B,Q=(n(71),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.dark?{backgroundImage:"url(https://www.dpfile.com/app/node-mobile-m-isomorphism-web/static/ee72da6bea423a71f81c4e0be8a1dcf7.png)"}:null;return r.a.createElement("header",{className:"banner",style:e},r.a.createElement("div",{className:"banner__title"},r.a.createElement("span",{className:"banner__logo"}),r.a.createElement("span",{className:"banner__text"},"\u5403\u559d\u73a9\u4e50\uff0c\u627e\u4f18\u60e0")),r.a.createElement("div",{className:"banner__btns"},r.a.createElement("a",{className:"banner__btn",href:"https://evt.dianping.com/synthesislink/6702.html"},"\u6253\u5f00\u5927\u4f17\u70b9\u8bc4"),r.a.createElement("a",{className:"banner__btn banner__btn--bg",href:"https://m.dianping.com/download/redirect?id=11186"},"\u4e0b\u8f7dAPP\u4eab\u7279\u4ef7")))}}]),t}(a.Component)),W=Q,z=(n(72),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"activity"},r.a.createElement("div",{className:"activity__block"},r.a.createElement("a",{className:"activity__content activity__content--pink",href:"https://h5.dianping.com/app/ziggurat/1005/index.html?activity_tlt=1005&infrom=mzone"},r.a.createElement("div",{className:"activity__title"},"\u6700\u9ad888\u5143"),r.a.createElement("div",{className:"activity__subTitle activity__subTitle--pink"},"\u901f\u9886\u65b0\u4eba\u7ea2\u5305"),r.a.createElement("img",{className:"activity__pic",src:"https://op.meituan.net/oppkit_pic/20160310032241-1e027deb-2/a3a31fff2e047a907a53d6488877f7fe.png"}))),r.a.createElement("div",{className:"activity__block"},r.a.createElement("a",{className:"activity__content activity__content--blue",href:"//h5.dianping.com/app/ziggurat/1361/index.html?notitlebar=1&token=*&latitude=*&longitude=*&activity_tlt=1361&infrom=mzone"},r.a.createElement("div",{className:"activity__title"},"\u54c1\u8d28\u798f\u5229\u653e\u9001"),r.a.createElement("div",{className:"activity__subTitle activity__subTitle--blue"},"\u4eab\u5403\u559d\u73a9\u4e50\u793c"),r.a.createElement("img",{className:"activity__pic",src:"https://op.meituan.net/oppkit_pic/20160310032241-1e027deb-2/a9b8c52c341892600ff7260c89025a59.png"}))))}}]),t}(a.Component)),G=(n(73),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u6211\u7684"),r.a.createElement("em",{className:"footer__seperator"},"|"),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u793e\u533a\u8bba\u575b"),r.a.createElement("em",{className:"footer__seperator"},"|"),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u6dfb\u52a0\u5546\u6237"),r.a.createElement("em",{className:"footer__seperator"},"|"),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u610f\u89c1\u53cd\u9988"),r.a.createElement("br",null),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u7f8e\u56e2\u7f51"),r.a.createElement("em",{className:"footer__seperator"},"|"),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u7f8e\u56e2\u4e0b\u8f7d"),r.a.createElement("em",{className:"footer__seperator"},"|"),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u7ed3\u5a5a"),r.a.createElement("em",{className:"footer__seperator"},"|"),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u4eb2\u5b50"),r.a.createElement("em",{className:"footer__seperator"},"|"),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u5bb6\u88c5"),r.a.createElement("em",{className:"footer__seperator"},"|"),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u5bb4\u4f1a"),r.a.createElement("em",{className:"footer__seperator"},"|"),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u6559\u80b2"),r.a.createElement("br",null),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u7535\u8111\u7248"),r.a.createElement("em",{className:"footer__seperator"},"|"),r.a.createElement("a",{className:"footer__link",href:"https://m.dianping.com/nmy/myinfo"},"\u5ba2\u6237\u7aef"),r.a.createElement("em",{className:"footer__seperator"},"|"),r.a.createElement("br",null),r.a.createElement("p",{className:"footer__copyright"},"copyright \xa92018 dianping.com"))}}]),t}(a.Component)),Y=n(8),V=function(e,t,n){return"/mock/products/".concat(e,".json?rowIndex=").concat(t,"&pageSize=").concat(n)},J=function(e){return"/mock/product_detail/".concat(e,".json")},X=function(e){return"/mock/shops/".concat(e,".json")},Z=function(){return"/mock/keywords/popular.json"},$=function(e){return"/mock/keywords/related.json?keywords=".concat(e)},ee=function(e){return"/mock/shops/related.json?keyword=".concat(e)},te=function(){return"/mock/orders/orders.json"},ne={name:"products",id:"id"},ae=function(e,t){var n=e.entities.products[t];return n&&n.detail&&n.purchaseNotes?n:null},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.response&&t.response[ne.name]?Object(v.a)({},e,t.response.products):e},ce=n(37),se=new Headers({Accept:"application/json","Content-Type":"application/json"}),ie=function(e,t){return 200===t.status?t.json():(console.log("fail getting data ".concat(e)),Promise.reject({error:{message:"request failed"}}))},oe=function(e,t){return(n=e,fetch(n,{method:"get",headers:se}).then(function(e){return ie(n,e)}).catch(function(e){return console.log("request fail in reach ".concat(n," + ").concat(e)),Promise.reject({error:{message:"request failed"}})})).then(function(e){return le(e,t)});var n},le=function(e,t){var n,a=t.id,r=t.name,c=[],s={};return Array.isArray(e)?e.forEach(function(e){c.push(e[a]),s[e[a]]=e}):(c.push(e[a]),s[e[a]]=e),n={},Object(Y.a)(n,r,s),Object(Y.a)(n,"ids",c),n},ue="HOME/FETCH_LIKES_REQUEST",me="HOME/FETCH_LIKES_SUCCESS",pe="HOME/FETCH_LIKES_FAILURE",de="HOME/FETCH_DISCOUNTS_REQUEST",he="HOME/FETCH_DISCOUNTS_SUCCESS",_e="HOME/FETCH_DISCOUNTS_FAILURE",fe="likes",Ee="discounts",ve=5,be=3,Oe={loadLikes:function(){return function(e,t){var n=t().home.likes.pageCount;return e(function(e){return Object(Y.a)({},"FETCH_DATA",{types:[ue,me,pe],schema:ne,endpoint:e})}(V(fe,n*ve,ve)))}},loadDiscounts:function(){return function(e,t){return 3===t().home.discounts.ids.length?null:e(function(e){return Object(Y.a)({},"FETCH_DATA",{types:[de,he,_e],schema:ne,endpoint:e})}(V(Ee,0,be)))}}},ye={likes:{isFetching:!1,pageCount:0,ids:[]},discounts:{isFetching:!1,ids:[]}},ge=function(e){return e.home.likes.ids.map(function(t){return e.entities.products[t]})},je=function(e){return e.home.discounts.ids.map(function(t){return e.entities.products[t]})},Ne=function(e){return e.home.likes.pageCount},Ce=Object(E.c)({likes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye.likes,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return Object(v.a)({},e,{isFetching:!0});case me:return Object(v.a)({},e,{isFetching:!1,pageCount:e.pageCount+1,ids:e.ids.concat(t.response.ids)});case pe:return Object(v.a)({},e,{isFetching:!1});default:return e}},discounts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye.discounts,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Object(v.a)({},e,{isFetching:!0});case he:return Object(v.a)({},e,{isFetching:!1,ids:e.ids.concat(t.response.ids)});case _e:return Object(v.a)({},e,{isFetching:!1});default:return e}}}),we=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).fetchLikes=function(){n.props.homeActions.loadLikes()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.likes,n=e.discounts,a=e.pageCount;return r.a.createElement("div",null,r.a.createElement(q,null),r.a.createElement(W,null),r.a.createElement(T,null),r.a.createElement(A,null),r.a.createElement(z,null),r.a.createElement(R,{data:n}),r.a.createElement(K,{data:t,pageCount:a,fetchLikes:this.fetchLikes}),r.a.createElement(G,null))}},{key:"componentDidMount",value:function(){this.props.homeActions.loadDiscounts()}}]),t}(a.Component),ke=Object(i.b)(function(e,t){return{likes:ge(e),discounts:je(e),pageCount:Ne(e)}},function(e,t){return{homeActions:Object(E.b)(Oe,e)}})(we),Te=(n(74),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.picture,n=e.shop,a=e.description,c=e.currentPrice,s=e.oldPrice,i=e.id;return r.a.createElement("div",{className:"productOverview"},r.a.createElement("div",{className:"productOverview__header"},r.a.createElement("div",{className:"productOverview__imgContainer"},r.a.createElement("img",{className:"productOverview__img",src:t,alt:n})),r.a.createElement("div",{className:"productOverview__baseInfo"},r.a.createElement("div",{className:"productOverview__title"},n),r.a.createElement("div",{className:"productOverview__content"},a))),r.a.createElement("div",{className:"productOverview__purchase"},r.a.createElement("span",{className:"productOverview__symbol"},"\uffe5"),r.a.createElement("span",{className:"productOverview__price"},c),r.a.createElement("span",{className:"productOverview__price--old"},"\uffe5".concat(s)),r.a.createElement(_.b,{to:"/purchase/".concat(i),className:"productOverview__btn"},"\u8d2d\u4e70")),r.a.createElement("ul",{className:"productOverview__remark"},r.a.createElement("li",{className:"productOverview__remarkItem"},r.a.createElement("i",{className:"productOverview__sign2"}),r.a.createElement("span",{className:"productOverview__desc"},"\u8fc7\u671f\u53ef\u9000")),r.a.createElement("li",{className:"productOverview__remarkItem"},r.a.createElement("i",{className:"productOverview__sign2"}),r.a.createElement("span",{className:"productOverview__desc"},"\u8fc7\u671f\u81ea\u52a8\u4f5c\u5e9f"))))}}]),t}(a.Component)),Se=(n(75),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.total,t=this.props.data,n=t.shop,a=t.address,c=t.phone;return r.a.createElement("div",{className:"shopInfo"},r.a.createElement("div",{className:"shopInfo__header"},"\u4f7f\u7528\u5546\u6237".concat(e),r.a.createElement("span",{className:"shopInfo__arrow"})),r.a.createElement("div",{className:"shopInfo__middle"},r.a.createElement("div",{className:"shopInfo__middleLeft"},r.a.createElement("div",{className:"shopInfo__shopName"},n),r.a.createElement("div",{className:"shopInfo__starsWrapper"},r.a.createElement("span",{className:"shopInfo__stars"},r.a.createElement("i",{className:"shopInfo__stars--red",style:{width:"100%"}})),r.a.createElement("span",{className:"shopInfo__distance"},">100km"))),r.a.createElement("a",{className:"shopInfo__middleRight",href:"tel://".concat(c)},r.a.createElement("i",{className:"shopInfo__phoneIcon"}))),r.a.createElement("div",{className:"shopInfo__bottom"},r.a.createElement("i",{className:"shopInfo__locationIcon"}),a))}}]),t}(a.Component)),Ie=(n(76),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.detail,n=t.category,a=t.products,c=t.remark,s=e.currentPrice,i=e.oldPrice;return r.a.createElement("div",{className:"detail"},r.a.createElement("div",{className:"detail__header"},r.a.createElement("span",null,"\u56e2\u8d2d\u8be6\u60c5"),r.a.createElement("i",{className:"detail__headerIcon"})),r.a.createElement("table",{cellPadding:"0",cellSpacing:"0",className:"detail__table"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"detail__row"},r.a.createElement("th",{colSpan:"3",className:"detail__category"},n)),r.a.createElement("tr",{className:"detail__row"},r.a.createElement("td",null,a[0].name),r.a.createElement("td",{className:"detail__td--alignRight"},a[0].quantity),r.a.createElement("td",{className:"detail__td--alignRight"},a[0].price)),r.a.createElement("tr",{className:"detail__row"},r.a.createElement("td",null),r.a.createElement("td",{className:"detail__td--price"},"\u6700\u9ad8\u4ef7\u503c",r.a.createElement("br",null),r.a.createElement("strong",{className:"detail__td--priceNew"},"\u56e2\u8d2d\u4ef7")),r.a.createElement("td",{className:"detail__td--price"},i,r.a.createElement("br",null),r.a.createElement("strong",{className:"detail__td--priceNew"},s))))),r.a.createElement("div",{className:"detail__remark"},c),r.a.createElement("div",{className:"detail__more"},r.a.createElement("span",null,"\u66f4\u591a\u56fe\u6587\u8be6\u60c5"),r.a.createElement("span",{className:"detail__notice"},"(\u5efa\u8baeWifi\u73af\u5883\u4e0b\u6253\u5361\uff0c\u571f\u8c6a\u8bf7\u968f\u610f)"),r.a.createElement("i",{className:"detail__arrow"})))}}]),t}(a.Component)),Ae=(n(77),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.purchaseNotes,n=e.validityPeriod;return r.a.createElement("div",{className:"remark"},r.a.createElement("div",{className:"remark__header"},"\u8d2d\u4e70\u987b\u77e5",r.a.createElement("i",{className:"remark__icon"})),r.a.createElement("div",{className:"remark__list"},r.a.createElement("dl",{className:"remark__item"},r.a.createElement("dt",{className:"remark__itemTitle"},"\u6709\u6548\u671f"),r.a.createElement("dd",{className:"remark__itemDesc"},n)),t.map(function(e,t){return r.a.createElement("dl",{key:t,className:"remark__item"},r.a.createElement("dt",{className:"remark__itemTitle"},e.title),r.a.createElement("dd",{className:"remark__itemDesc"},e.content))})))}}]),t}(a.Component)),De=(n(78),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.productId;return r.a.createElement(_.b,{className:"buyButton",to:"/purchase/".concat(e)},"\u7acb\u5373\u8d2d\u4e70")}}]),t}(a.Component)),Re=(n(79),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.grey,n=e.title,a=e.onBack,c=t?"#f0f0f0":"#fff";return r.a.createElement("header",{className:"header",style:{backgroundColor:c}},r.a.createElement("div",{className:"header__back",onClick:a},"\u8fd4\u56de"),r.a.createElement("div",{className:"header__title"},n))}}]),t}(a.Component)),Fe={name:"shops",id:"id"},He=function(e,t){return e.entities.shops[t]},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.response&&t.response[Fe.name]?Object(v.a)({},e,t.response.shops):e},Ue={product:{isFetching:!1,id:null},relatedShop:{isFetching:!1,id:null}},Pe="DETAIL/FETCH_PRODUCT_DETAIL_REQUEST",xe="DETAIL/FETCH_PRODUCT_DETAIL_SUCCESS",Me="DETAIL/FETCH_PRODUCT_DETAIL_FAILURE",Ke="DETAIL/FETCH_SHOP_REQUEST",Be="DETAIL/FETCH_SHOP_REQUEST",qe="DETAIL/FETCH_SHOP_REQUEST",Qe={loadProductDetail:function(e){return function(t,n){if(ae(n(),e))return t(We(e));var a=J(e);return t(Ge(a,e))}},loadRelatedShop:function(e){return function(t,n){if(He(n(),e))return t(ze(e));var a=X(e);return t(Ye(a,e))}}},We=function(e){return{type:xe,id:e}},ze=function(e){return{type:Be,id:e}},Ge=function(e,t){var n;return n={},Object(Y.a)(n,"FETCH_DATA",{types:[Pe,xe,Me],schema:ne,endpoint:e}),Object(Y.a)(n,"id",t),n},Ye=function(e,t){var n;return n={},Object(Y.a)(n,"FETCH_DATA",{types:[Ke,Be,qe],schema:Fe,endpoint:e}),Object(Y.a)(n,"id",t),n},Ve=Object(E.c)({product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue.product,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:return Object(v.a)({},e,{isFetching:!0});case xe:return Object(v.a)({},e,{isFetching:!1,id:t.id});case Me:return Object(v.a)({},e,{isFetching:!1,id:null});default:return e}},relatedShop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue.relatedShop,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke:return Object(v.a)({},e,{isFetching:!0});case Be:return Object(v.a)({},e,{isFetching:!1,id:t.id});case qe:return Object(v.a)({},e,{isFetching:!1,id:null});default:return e}}}),Je=function(e,t){return ae(e,t)},Xe=function(e,t){var n=function(e,t){return e.entities.products[t]}(e,t),a=n?n.nearestShop:null;return a?He(e,a):null},Ze=Ve,$e=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onBack=function(){console.log("this props",n.props),n.props.history.goBack()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.product,n=e.relatedShop;return r.a.createElement("div",null,r.a.createElement(Re,{title:"\u56e2\u8d2d\u8be6\u60c5",onBack:this.onBack}),t&&r.a.createElement(Te,{data:t}),n&&r.a.createElement(Se,{data:n,total:t.shopIds.length}),t&&r.a.createElement("div",null,r.a.createElement(Ie,{data:t}),r.a.createElement(Ae,{data:t}),r.a.createElement(De,{productId:t.id})))}},{key:"componentDidMount",value:function(){var e=this.props.product;if(console.log("product",e),console.log("props",this.props),e)this.props.relatedShop||this.props.detailActions.loadRelatedShop(e.nearestShop);else{var t=this.props.match.params.id;this.props.detailActions.loadProductDetail(t)}}},{key:"componentDidUpdate",value:function(e){!e.product&&this.props.product&&this.props.detailActions.loadRelatedShop(this.props.product.nearestShop)}}]),t}(a.Component),et=Object(i.b)(function(e,t){var n=t.match.params.id;return{product:Je(e,n),relatedShop:Xe(e,n)}},function(e,t){return{detailActions:Object(E.b)(Qe,e)}})($e),tt=(n(80),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){n.props.onChange(e.target.value)},n.onClear=function(){n.props.onClear()},n.onClick=function(e){n.props.onClickItem(e)},n.onCancel=function(){n.props.onCancel()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"searchBox"},r.a.createElement("div",{className:"searchBox__container"},r.a.createElement("input",{className:"searchBox__text",onChange:this.onChange,value:this.props.data}),r.a.createElement("span",{className:"searchBox__clear",onClick:this.onClear}),r.a.createElement("span",{className:"searchBox__cancel",onClick:this.onCancel},"\u53d6\u6d88")),this.props.data.length>0?this.renderSuggestList():null)}},{key:"renderSuggestList",value:function(){var e=this,t=this.props.relatedKeywords;return r.a.createElement("ul",{className:"searchBox__list"},t.map(function(t){return r.a.createElement("li",{className:"searchBox__item",key:t.id,onClick:e.onClick.bind(e,t)},r.a.createElement("span",{className:"searchBox__itemKeyworkd"},t.keyword),r.a.createElement("span",{className:"searchBox__itemQuantity"},"\u7ea6",t.quantity,"\u4e2a\u7ed3\u679c"))}))}}]),t}(a.Component)),nt=(n(81),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data;return r.a.createElement("div",{className:"popularSearch"},t.map(function(t){return r.a.createElement("span",{className:"popularSearch__item",key:t.id,onClick:e.onClick.bind(e,t)},t.keyword)}))}},{key:"onClick",value:function(e){this.props.onClick(e)}}]),t}(a.Component)),at=(n(82),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(e){n.props.onClick(e)},n.onClear=function(){n.props.onClear()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data;return r.a.createElement("div",{className:"searchHistory"},r.a.createElement("div",{className:"searchHistory__header"},"\u641c\u7d22\u5386\u53f2"),r.a.createElement("ul",{className:"searchHistory__list"},t.map(function(t,n){return r.a.createElement("li",{className:"searchHistory__item",key:n,onClick:e.onClick.bind(e,t)},t.keyword)})),r.a.createElement("div",{className:"searchHistory__clear",onClick:this.onClear},"\u6e05\u7a7a\u641c\u7d22\u8bb0\u5f55"))}}]),t}(a.Component)),rt=n(38),ct={name:"keywords",id:"id"},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.response&&t.response.keywords?Object(v.a)({},e,t.response.keywords):e},it={inputText:"",popularKeywords:{isFetching:!1,ids:[]},relatedKeywords:{},historyKeywords:[],searchedShopsByKeyword:{}},ot="SEARCH/FETCH_POPULAR_KEYWORDS_REQUEST",lt="SEARCH/FETCH_POPULAR_KEYWORDS_SUCCESS",ut="SEARCH/FETCH_POPULAR_KEYWORDS_FAILURE",mt="SEARCH/FETCH_RELATED_KEYWORDS_REQUEST",pt="SEARCH/FETCH_RELATED_KEYWORDS_SUCCESS",dt="SEARCH/FETCH_RELATED_KEYWORDS_FAILURE",ht="SEARCH/FETCH_RELATED_SHOPS_REQUEST",_t="SEARCH/FETCH_RELATED_SHOPS_SUCCESS",ft="SEARCH/FETCH_RELATED_SHOPS_FAILURE",Et="SEARCH/SET_INPUT_TEXT",vt="SEARCH/CLEAR_INPUT_TEXT",bt="SEARCH/ADD_HISTORY_KEYWORD",Ot="SEARCH/CLEAR_HISTORY_KEYWORDS",yt={loadPopularKeywords:function(){return function(e,t){if(t().search.popularKeywords.ids.length>0)return null;var n=Z();return e(jt(n))}},loadRelatedKeywords:function(e){return function(t,n){var a=n().search.relatedKeywords[e];if(a&&a.ids.length>0)return null;var r=$(e);return t(Nt(r,e))}},setInputText:function(e){return{type:Et,text:e}},clearInputText:function(){return{type:vt}},addHistoryKeyword:function(e){return{type:bt,id:e}},clearHistoryKeywords:function(){return{type:Ot}},loadRelatedShops:function(e){return function(t,n){if(n().search.searchedShopsByKeyword[e])return null;var a=ee(e);return t(gt(a,e))}}},gt=function(e,t){var n;return n={},Object(Y.a)(n,"FETCH_DATA",{types:[ht,_t,ft],endpoint:e,schema:Fe}),Object(Y.a)(n,"text",t),n},jt=function(e){return Object(Y.a)({},"FETCH_DATA",{types:[ot,lt,ut],endpoint:e,schema:ct})},Nt=function(e,t){var n;return n={},Object(Y.a)(n,"FETCH_DATA",{types:[mt,pt,dt],endpoint:e,schema:ct}),Object(Y.a)(n,"text",t),n},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,ids:[]},t=arguments.length>1?arguments[1]:void 0;switch(console.log("action",t),t.type){case ht:return Object(v.a)({},e,{isFetching:!0});case _t:return Object(v.a)({},e,{isFetching:!1,ids:t.response.ids});case ft:return Object(v.a)({},e,{isFetching:!1});default:return e}},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!0,ids:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:return Object(v.a)({},e,{isFetching:!0});case pt:return Object(v.a)({},e,{isFetching:!1,ids:t.response.ids});case dt:return Object(v.a)({},e,{isFetching:!1});default:return e}},kt=Object(E.c)({popularKeywords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it.popularKeywords,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ot:return Object(v.a)({},e,{isFetching:!0});case lt:return Object(v.a)({},e,{isFetching:!1,ids:t.response.ids});case ut:return Object(v.a)({},e,{isFetching:!1});default:return e}},relatedKeywords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it.relatedKeywords,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:case pt:case dt:return Object(v.a)({},e,Object(Y.a)({},t.text,wt(e[t.text],t)));default:return e}},inputText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it.inputText,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Et:return t.text;case vt:return"";default:return e}},historyKeywords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it.historyKeywords,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt:var n=e.filter(function(e){return t.id!==e});return[t.id].concat(Object(rt.a)(n));case Ot:return[];default:return e}},searchedShopsByKeyword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it.searchedShopsByKeyword,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:case _t:case ft:return Object(v.a)({},e,Object(Y.a)({},t.text,Ct(e[t.text],t)));default:return e}}}),Tt=function(e){return e.search.inputText},St=function(e){return e.search.popularKeywords.ids.map(function(t){return e.entities.keywords[t]})},It=function(e){var t=e.search.inputText;if(!t||0===t.trim().length)return[];var n=e.search.relatedKeywords[t];return n?n.ids.map(function(t){return e.entities.keywords[t]}):[]},At=function(e){return e.search.historyKeywords.map(function(t){return e.entities.keywords[t]})},Dt=function(e){var t=e.search.historyKeywords[0];return t?e.search.searchedShopsByKeyword[t].ids.map(function(t){return e.entities.shops[t]}):[]},Rt=function(e){var t=e.search.historyKeywords[0];return t?e.entities.keywords[t]:""},Ft=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){(0,n.props.searchActions.loadPopularKeywords)()},n.onCancel=function(){n.onClearInput(),n.props.history.goBack()},n.onClickItem=function(e){n.props.searchActions.setInputText(e.keyword),n.props.searchActions.addHistoryKeyword(e.id),n.props.searchActions.loadRelatedShops(e.id),n.props.history.push("./search_result")},n.onClearInput=function(){n.props.searchActions.clearInputText()},n.onChangeInput=function(e){n.props.searchActions.setInputText(e),n.props.searchActions.loadRelatedKeywords(e)},n.onClearHistory=function(){n.props.searchActions.clearHistoryKeywords()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.inputText,n=e.popularKeywords,a=e.relatedKeywords,c=e.historyKeywords;e.searchActions;return r.a.createElement("div",null,r.a.createElement(tt,{data:t,relatedKeywords:a,onClear:this.onClearInput,onChange:this.onChangeInput,onClickItem:this.onClickItem,onCancel:this.onCancel}),r.a.createElement(nt,{data:n,onClick:this.onClickItem}),r.a.createElement(at,{data:c,onClear:this.onClearHistory,onClick:this.onClickItem}))}},{key:"componentWillUnmount",value:function(){(0,this.props.searchActions.clearInputText)()}}]),t}(a.Component),Ht=Object(i.b)(function(e,t){return{inputText:Tt(e),popularKeywords:St(e),relatedKeywords:It(e),historyKeywords:At(e)}},function(e,t){return{searchActions:Object(E.b)(yt,e)}})(Ft),Lt=(n(83),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.url,n=e.pic,a=e.shop,c=e.star,s=e.price,i=e.quantity,o=e.region,l=e.category;return r.a.createElement("a",{className:"shopItem",href:t},r.a.createElement("div",{className:"shopItem__pic",style:{backgroundImage:"url("+n+")"}}),r.a.createElement("div",{className:"shopItem__content"},r.a.createElement("div",{className:"shopItem__title"},a),r.a.createElement("div",{className:"shopItem__comment"},r.a.createElement("span",{className:"shopItem__star shopItem__star--"+c}),r.a.createElement("span",{className:"shopItem__quantity"},i),r.a.createElement("span",{className:"shopItem__price"},s,"/\u4eba")),r.a.createElement("div",{className:"shopItem__info"},r.a.createElement("span",{className:"shopItem__region"},o),r.a.createElement("span",{className:"shopItem__category"},l))))}}]),t}(a.Component)),Ut=(n(84),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){console.log("shoplist",this.props);var e=this.props.data;return r.a.createElement("div",{className:"shopList"},r.a.createElement("div",{className:"shopList__filter"},r.a.createElement("span",{className:"shopList__filterItem"},"\u5168\u90e8\u5546\u533a"),r.a.createElement("span",{className:"shopList__filterItem"},"\u5168\u90e8\u5206\u7c7b"),r.a.createElement("span",{className:"shopList__filterItem"},"\u667a\u80fd\u6392\u5e8f")),r.a.createElement("div",{className:"shopList__list"},e.map(function(t,n){return r.a.createElement("div",{key:t.id},r.a.createElement(Lt,{data:t}),n<e.length-1?r.a.createElement("div",{className:"shopList__divider"}):null)})))}}]),t}(a.Component)),Pt=(n(85),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onBack,n=e.onSearch;return r.a.createElement("header",{className:"searchHeader"},r.a.createElement("div",{className:"searchHeader__back",onClick:t}),r.a.createElement("div",{className:"searchHeader__list"},r.a.createElement("span",{className:"searchHeader__item searchHeader__item--selected"},"\u5546\u6237"),r.a.createElement("span",{className:"searchHeader__item"},"\u95ea\u60e0\u56e2\u8d2d")),r.a.createElement("div",{className:"searchHeader__icon",onClick:n}))}}]),t}(a.Component)),xt=(n(86),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.text;return console.log("text",e),r.a.createElement("div",{className:"keywordBox"},r.a.createElement(_.b,{to:"/search",className:"keywordBox__text"},e.keyword))}}]),t}(a.Component)),Mt=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleBack=function(){n.props.history.push("/")},n.handleSearch=function(){n.props.history.push("/search")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shops,n=e.currentKeyword;return r.a.createElement("div",null,r.a.createElement(Pt,{onBack:this.handleBack,onSearch:this.handleSearch}),r.a.createElement(xt,{text:n}),r.a.createElement(W,{dark:!0}),r.a.createElement(Ut,{data:t}))}}]),t}(a.Component),Kt=Object(i.b)(function(e,t){return{shops:Dt(e),currentKeyword:Rt(e)}},null)(Mt),Bt=(n(87),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loginHeader"},r.a.createElement("a",{className:"loginHeader__back"}),r.a.createElement("div",{className:"loginHeader__title"},"\u8d26\u53f7\u5bc6\u7801\u767b\u5f55"))}}]),t}(a.Component)),qt=(n(88),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.username,n=e.password,a=e.onChange,c=e.onSubmit;return r.a.createElement("div",{className:"loginForm"},r.a.createElement("div",{className:"loginForm__inputContainer"},r.a.createElement("div",{className:"loginForm__row"},r.a.createElement("label",{className:"loginForm__mobileLabel"},"86"),r.a.createElement("input",{className:"loginForm__input",name:"username",value:t,onChange:a})),r.a.createElement("div",{className:"loginForm__row"},r.a.createElement("label",{className:"loginForm__passwordLabel"},"\u5bc6\u7801"),r.a.createElement("input",{className:"loginForm__input",name:"password",type:"password",value:n,onChange:a}))),r.a.createElement("div",{className:"loginForm__btnContainer"},r.a.createElement("button",{className:"loginForm__btn",onClick:c},"\u767b\u5f55")))}}]),t}(a.Component)),Qt={username:localStorage.getItem("username")||"",password:"",status:localStorage.getItem("isLogin")||!1,isFetching:!1},Wt="LOGIN/LOGIN_REQUEST",zt="LOGIN/LOGIN_SUCCESS",Gt="LOGIN/LOGIN_FAILURE",Yt="LOGIN/LOGOUT",Vt="LOGIN/SET_USERNAME",Jt="LOGIN/SET_PASSWORD",Xt={login:function(){return function(e,t){var n=t().login,a=n.username,r=n.password;return a&&r?(e(Zt()),new Promise(function(t,n){setTimeout(function(){e($t()),localStorage.setItem("username",a),localStorage.setItem("isLogin",!0),t()},1e3)})):e(en("\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"))}},logout:function(){return localStorage.removeItem("username"),localStorage.removeItem("isLogin"),{type:Yt}},setUsername:function(e){return{type:Vt,username:e}},setPassword:function(e){return{type:Jt,password:e}}},Zt=function(){return{type:Wt}},$t=function(){return{type:zt}},en=function(){return{type:Gt}},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Wt:return Object(v.a)({},e,{isFetching:!0});case zt:return Object(v.a)({},e,{isFetching:!1,status:!0});case Gt:return Object(v.a)({},e,{isFetching:!1});case Yt:return Object(v.a)({},e,{status:!1,username:""});case Vt:return Object(v.a)({},e,{username:t.username});case Jt:return Object(v.a)({},e,{password:t.password});default:return e}},nn=function(e){return e.login.username},an=function(e){return e.login.password},rn=function(e){return e.login.status},cn=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){"username"===e.target.name?n.props.loginActions.setUsername(e.target.value):"password"===e.target.name&&n.props.loginActions.setPassword(e.target.value)},n.handleSumbit=function(){n.props.loginActions.login()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.username,n=e.password;return e.login?r.a.createElement(f.a,{to:"/user"}):r.a.createElement("div",{className:"login"},r.a.createElement(Bt,null),r.a.createElement(qt,{username:t,password:n,onChange:this.handleChange,onSubmit:this.handleSumbit}))}}]),t}(a.Component),sn=Object(i.b)(function(e,t){return{username:nn(e),password:an(e),login:rn(e)}},function(e,t){return{loginActions:Object(E.b)(Xt,e)}})(cn),on=n(27),ln=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,n=e.login,a=Object(on.a)(e,["component","login"]);return r.a.createElement(f.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(f.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}}]),t}(a.Component),un=Object(i.b)(function(e,t){return{login:rn(e)}},null)(ln),mn=(n(89),n(90),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.onClick;return r.a.createElement("div",{className:"tip"},r.a.createElement("div",{className:"tip__alert"},r.a.createElement("div",{className:"tip__content"},t),r.a.createElement("div",{className:"tip__btns"},r.a.createElement("a",{className:"tip__btn",onClick:n},"\u786e\u5b9a"))))}}]),t}(a.Component)),pn=(n(91),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.showTip,e.quantity),n=e.onCounterDec,a=e.onCounterInc,c=e.onSetQuantity,s=e.onSubmit;return r.a.createElement("div",{className:"purchaseForm"},r.a.createElement("div",{className:"purchaseForm__wrapper"},r.a.createElement("div",{className:"purchaseForm__row"},r.a.createElement("div",{className:"purchaseForm__rowLabel"},"\u6570\u91cf"),r.a.createElement("div",{className:"purchaseForm__rowValue"},r.a.createElement("span",{className:"purchaseForm__counter--dec",onClick:n},"-"),r.a.createElement("input",{className:"purchaseForm__quantity",value:t,type:"number",onChange:c}),r.a.createElement("span",{className:"purchaseForm__counter--inc",onClick:a},"+"))),r.a.createElement("div",{className:"purchaseForm__row"},r.a.createElement("div",{className:"purchaseForm__rowLabel"},"\u5c0f\u8ba1"),r.a.createElement("div",{className:"purchaseForm__rowValue"})),r.a.createElement("div",{className:"purchaseForm__row"},r.a.createElement("div",{className:"purchaseForm__rowLabel"},"\u624b\u673a\u53f7\u7801"),r.a.createElement("div",{className:"purchaseForm__rowValue"}))),r.a.createElement("div",{className:"purchaseForm__remark"},r.a.createElement("div",{className:"purchaseForm__remarkItem"},r.a.createElement("i",{className:"purchaseForm__sign"}),r.a.createElement("span",{className:"purchaseForm__desc"},"\u652f\u6301\u968f\u65f6\u9000")),r.a.createElement("div",{className:"purchaseForm__remarkItem"},r.a.createElement("i",{className:"purchaseForm__sign"}),r.a.createElement("span",{className:"purchaseForm__desc"},"\u652f\u6301\u8fc7\u671f\u9000"))),r.a.createElement("a",{className:"purchaseForm__submit",onClick:s},"\u63d0\u4ea4\u8ba2\u5355"))}}]),t}(a.Component));function dn(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var hn,_n={name:"orders",id:"id"},fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.response&&t.response.orders)return Object(v.a)({},e,t.response.orders);switch(t.type){case En.DELETE_ORDER:var n=t.orderId;return e[n],Object(on.a)(e,[n].map(dn));case En.ADD_COMMENT:return Object(v.a)({},e,Object(Y.a)({},t.orderId,Object(v.a)({},e[t.orderId],{commentId:t.commentId})));case En.ADD_ORDER:return Object(v.a)({},e,Object(Y.a)({},t.orderId,t.order));default:return e}},En={DELETE_ORDER:"ORDER/DELETE_ORDER",ADD_COMMENT:"ORDER/ADD_COMMENT",ADD_ORDER:"ORDER/ADD_ORDER"},vn=10,bn=function(e){return{type:En.DELETE_ORDER,orderId:e}},On=function(e,t){return{type:En.ADD_COMMENT,orderId:e,commentId:t}},yn=function(e){var t="o-".concat(vn++);return{type:En.ADD_ORDER,orderId:t,order:Object(v.a)({},e,{id:t})}},gn={quantity:0,showTip:!1},jn="PURCHASE/SET_ORDER_QUANTITY",Nn="PURCHASE/HIDE_TIP",Cn="PURCHASE/SUBMIT_ORDER_REQUEST",wn="PURCHASE/SUBMIT_ORDER_SUCCESS",kn={setOrderQuantity:function(e){return{type:jn,quantity:e}},hideTip:function(){return{type:Nn}},submitOrder:function(e){return function(t,n){return t(Tn()),new Promise(function(a,r){setTimeout(function(){var a=ae(n(),e);console.log("product",a);var r=n().purchase.quantity,c=a.currentPrice*r,s="".concat(r,"\u5f20 | \u603b\u4ef7: ").concat(c),i=a.validityPeriod,o={title:"".concat(a.shop,":").concat(a.product),orderPicUrl:a.picture,channel:"\u56e2\u8d2d",statusText:"\u5f85\u6d88\u8d39",text:[s,i],type:3};t(yn(o)),t(Sn())},500)})}}},Tn=function(){return{type:Cn}},Sn=function(){return{type:wn}},In=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jn:return Object(v.a)({},e,{quantity:t.quantity});case wn:return Object(v.a)({},e,{showTip:!0});case Nn:return Object(v.a)({},e,{showTip:!1});default:return e}},An=function(e){return e.purchase.showTip},Dn=function(e){return e.purchase.quantity},Rn=function(e,t){return ae(e,t)},Fn=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleBack=function(){n.props.history.goBack()},n.handleTipClick=function(){n.props.purchaseActions.hideTip(),n.props.history.goBack()},n.handleCounterDec=function(){var e=n.props.quantity;n.props.purchaseActions.setOrderQuantity(e-1)},n.handleCounterInc=function(){var e=n.props.quantity;n.props.purchaseActions.setOrderQuantity(e+1)},n.handleSetQuantity=function(){var e=n.props.quantity;n.props.purchaseActions.setOrderQuantity(e)},n.handleSubmit=function(){var e=n.props.match.params.id;console.log("productId",e),n.props.purchaseActions.submitOrder(e)},n.componentDidMount=function(){if(!n.props.product){var e=n.props.match.params.id;n.props.detailActions.loadProductDetail(e)}},n.componentWillUnmount=function(){n.props.purchaseActions.setOrderQuantity(1)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"purchase"},r.a.createElement(Re,{title:"\u4e0b\u5355",onBack:this.handleBack}),r.a.createElement(pn,{quantity:this.props.quantity,onCounterDec:this.handleCounterDec,onCounterInc:this.handleCounterInc,showTip:this.props.showTip,onSetQuantity:this.handleSetQuantity,onSubmit:this.handleSubmit}),this.props.showTip?r.a.createElement(mn,{message:"\u8d2d\u4e70\u6210\u529f",onClick:this.handleTipClick}):null)}}]),t}(a.Component),Hn=Object(i.b)(function(e,t){var n=t.match.params.id;return console.log("showTip",An(e)),{quantity:Dn(e),showTip:An(e),product:Rn(e,n)}},function(e,t){return{purchaseActions:Object(E.b)(kn,e),detailActions:Object(E.b)(Qe,e)}})(Fn),Ln=(n(92),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleClickBack=function(){n.props.onBack()},n.handleClickLogout=function(){n.props.onLogout()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"userHeader"},r.a.createElement("div",{className:"userHeader__back",onClick:this.handleClickBack},"\u9996\u9875"),r.a.createElement("div",{className:"userHeader__list"},r.a.createElement("span",{className:"userHeader__item userHeader__item--selected"},"\u8ba2\u5355"),r.a.createElement("span",{className:"userHeader__item"},"\u62b5\u7528\u5238")),r.a.createElement("div",{className:"userHeader__right",onClick:this.handleClickLogout},"\u6ce8\u9500"))}}]),t}(a.Component)),Un=(n(93),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).renderEditArea=function(){var e=n.props,t=e.comment,a=e.onCancelComment,c=e.onSubmitComment;return r.a.createElement("div",{className:"orderItem__commentContainer"},r.a.createElement("textarea",{className:"orderItem__comment",value:t,onChange:n.handleCommentChange}),n.renderStar(),r.a.createElement("button",{className:"orderItem__commentBtn",onClick:c},"\u63d0\u4ea4"),r.a.createElement("button",{className:"orderItem__commentBtn",onClick:a},"\u5220\u9664"))},n.renderStar=function(){var e=n.props,t=e.stars;e.onStarsChange;return r.a.createElement("div",null,[1,2,3,4,5].map(function(e){var a=t>=e?"orderItem__star--light":"";return r.a.createElement("span",{className:"orderItem__star"+a,key:e,onClick:n.handleStarsChange.bind(Object(F.a)(n),e)},"\u2605")}))},n.handleCommentChange=function(e){n.props.onCommentChange(e.target.value)},n.handleStarsChange=function(e){n.props.onStarsChange(e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){console.log("isCommenting",this.props.isCommenting);var e=this.props,t=e.data,n=e.onRemove,a=e.onComment,c=e.isCommenting;return r.a.createElement("div",{className:"orderItem"},r.a.createElement("div",{className:"orderItem__title"},r.a.createElement("span",null,t.title)),r.a.createElement("div",{className:"orderItem__main"},r.a.createElement("div",{className:"orderItem__imgWrapper"},r.a.createElement("div",{className:"orderItem__tag"},t.statusText),r.a.createElement("img",{alt:t.title,src:t.orderPicUrl,className:"orderItem__img"})),r.a.createElement("div",{className:"orderItem__content"},r.a.createElement("div",{className:"orderItem__line"},t.text[0]),r.a.createElement("div",{className:"orderItem__line"},t.text[1]))),r.a.createElement("div",{className:"orderItem__bottom"},r.a.createElement("div",{className:"orderItem__type"},t.channel),r.a.createElement("div",null,1!==t.type||t.commentId?null:r.a.createElement("div",{className:"orderItem__btn",onClick:a},"\u8bc4\u4ef7"),r.a.createElement("div",{className:"orderItem__btn",onClick:n},"\u5220\u9664"))),c?this.renderEditArea():null)}}]),t}(a.Component)),Pn=(n(94),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.cancelText,a=e.confirmText,c=e.onCancel,s=e.onConfirm;return r.a.createElement("div",{className:"confirm"},r.a.createElement("div",{className:"confirm__alert"},r.a.createElement("div",{className:"confirm__content"},t),r.a.createElement("div",{className:"confirm__btns"},r.a.createElement("a",{className:"confirm__btn",onClick:c},n),r.a.createElement("a",{className:"confirm__btn",onClick:s},a))))}}]),t}(a.Component)),xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mn.ADD_COMMENT:return Object(v.a)({},e,Object(Y.a)({},t.commentObj.id,t.comment));default:return e}},Mn={ADD_COMMENT:"COMMENTS/ADD_COMMENT"},Kn=function(e){return{type:Mn.ADD_COMMENT,commentObj:e}},Bn=(hn={},Object(Y.a)(hn,2,"toPayIds"),Object(Y.a)(hn,3,"availableIds"),Object(Y.a)(hn,4,"refundIds"),hn),qn={orders:{isFetching:!1,ids:[],toPayIds:[],availableIds:[],refundIds:[]},currentTab:0,currentOrder:{id:null,isDeleting:!1,isCommenting:!1,comment:"",stars:0}},Qn="USER/FETCH_ORDERS_REQUEST",Wn="USER/FETCH_ORDERS_SUCCESS",zn="USER/FETCH_ORDERS_FAILURE",Gn="USER/SET_CURRENT_TAB",Yn="USER/DELETE_ORDER_REQUEST",Vn="USER/DELETE_ORDER_SUCCESS",Jn="USER/DELETE_ORDER_FAILURE",Xn="USER/SHOW_DELETE_DIALOG",Zn="USER/HIDE_DELETE_DIALOG",$n="USER/SHOW_COMMENT_AREA",ea="USER/HIDE_COMMENT_AREA",ta="USER/SET_COMMENT",na="USER/SET_STARS",aa="USER/POST_COMMENT_REQUEST",ra="USER/POST_COMMENT_SUCCESS",ca="USER/POST_COMMENT_FAILURE",sa={loadOrders:function(){return function(e,t){var n=t().user.orders.ids;if(n&&n.length>0)return null;var a=te();return e(ma(a))}},setCurrentTab:function(e){return{type:Gn,index:e}},showDeleteDialog:function(e){return{type:Xn,orderId:e}},removeOrders:function(){return function(e,t){var n=t().user.currentOrder.id;return e(la()),new Promise(function(t,a){setTimeout(function(){e(ua(n)),e(bn(n)),t()},500)})}},hideDeleteDialog:function(){return{type:Zn}},showCommentArea:function(e){return{type:$n,orderId:e}},hideCommentArea:function(){return{type:ea}},setComment:function(e){return{type:ta,comment:e}},setStars:function(e){return{type:na,stars:e}},submitComment:function(){return function(e,t){return e(ia()),new Promise(function(n,a){setTimeout(function(){var a=t().user.currentOrder,r=a.id,c=a.stars,s=a.comment,i={id:new Date,stars:c,content:s};e(oa()),e(Kn(i)),e(On(r,i.id)),n()},500)})}}},ia=function(){return{type:aa}},oa=function(){return{type:ra}},la=function(){return{type:Yn}},ua=function(e){return{type:Vn,orderId:e}},ma=function(e){return Object(Y.a)({},"FETCH_DATA",{types:[Qn,Wn,zn],schema:_n,endpoint:e})},pa=function(e,t,n){return e[t].filter(function(e){return e!==n})},da=Object(E.c)({currentTab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn.currentTab,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Gn:return t.index;default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn.orders,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qn:return Object(v.a)({},e,{isFetching:!0});case Wn:var n=t.response.ids.filter(function(e){return 2===t.response.orders[e].type}),a=t.response.ids.filter(function(e){return 3===t.response.orders[e].type}),r=t.response.ids.filter(function(e){return 4===t.response.orders[e].type});return Object(v.a)({},e,{isFetching:!1,ids:e.ids.concat(t.response.ids),toPayIds:e.toPayIds.concat(n),availableIds:e.availableIds.concat(a),refundIds:e.refundIds.concat(r)});case En.DELETE_ORDER:case Vn:return Object(v.a)({},e,{ids:pa(e,"ids",t.orderId),toPayIds:pa(e,"toPayIds",t.orderId),availableIds:pa(e,"availableIds",t.orderId),refundIds:pa(e,"refundIds",t.orderId)});case En.ADD_ORDER:var c=Bn[t.order.type];return console.log("key",c),console.log("state[key]",e[c]),Object(Y.a)({ids:e.ids.concat(t.order.id)},c,e[c].concat(t.order.id));default:return e}},currentOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn.currentOrder,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xn:return Object(v.a)({},e,{isDeleting:!0,id:t.orderId});case $n:return Object(v.a)({},e,{isCommenting:!0,id:t.orderId});case Zn:case Jn:case Vn:case ea:case ra:case ca:return Object(v.a)({},e,{isDeleting:!1,id:qn.currentOrder});case ta:return Object(v.a)({},e,{comment:t.comment});case na:return Object(v.a)({},e,{stars:t.stars});default:return e}}}),ha=function(e){var t=["ids","toPayIds","availableIds","refundIds"][e.user.currentTab];return e.user.orders[t].map(function(t){return function(e,t){return e.entities.orders[t]}(e,t)})},_a=function(e){return e.user.currentTab},fa=function(e){return e.user.currentOrder.isDeleting},Ea=function(e){return e.user.currentOrder?e.user.currentOrder.id:0},va=function(e){return e.user.currentOrder?e.user.currentOrder.stars:0},ba=function(e){return e.user.currentOrder?e.user.currentOrder.comment:""},Oa=(n(95),["\u5168\u90e8\u8ba2\u5355","\u5f85\u4ed8\u6b3e","\u53ef\u4f7f\u7528","\u9000\u6b3e/\u552e\u540e"]),ya=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).renderConfirmDialog=function(){var e=n.props.userActions,t=e.hideDeleteDialog,a=e.removeOrders;return r.a.createElement(Pn,{content:"\u786e\u5b9a\u5220\u9664\u8ba2\u5355\u5417",cancelText:"\u53d6\u6d88",confirmText:"\u786e\u5b9a",onCancel:t,onConfirm:a})},n.handleClickTab=function(e){n.props.userActions.setCurrentTab(e)},n.renderOrderList=function(e){var t=n.props,a=t.commentingOrderId,c=t.comment,s=t.stars,i=n.props.userActions,o=i.showDeleteDialog,l=i.showCommentArea,u=i.hideCommentArea,m=i.setComment,p=i.setStars,d=i.submitComment;return e.map(function(e,t){return r.a.createElement(Un,{key:e.id,data:e,isCommenting:e.id===a,comment:c,stars:s,onRemove:o.bind(Object(F.a)(n),e.id),onComment:l.bind(Object(F.a)(n),e.id),onCommentChange:m,onStarsChange:p,onSubmitComment:d,onCancelComment:u})})},n.renderEmpty=function(){return r.a.createElement("div",{className:"userMain__empty"},r.a.createElement("div",{className:"userMain__emptyIcon"}),r.a.createElement("div",{className:"userMain__emptyText1"},"\u60a8\u8fd8\u6ca1\u6709\u76f8\u5173\u8ba2\u5355"),r.a.createElement("div",{className:"userMain__emptyText2"},"\u53bb\u901b\u901b\u770b\u6709\u54ea\u4e9b\u60f3\u4e70\u7684"))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.currentTab,c=t.isDeleting;return r.a.createElement("div",null,r.a.createElement("div",{className:"userMain__menu"},Oa.map(function(t,n){return r.a.createElement("div",{className:"userMain__tab",key:n,onClick:e.handleClickTab.bind(e,n)},r.a.createElement("span",{className:a===n?"userMain__title userMain__title--active":"userMain__title"},t))})),r.a.createElement("div",{className:"userMain__content"},n&&n.length>0?this.renderOrderList(n):this.renderEmpty()),c?this.renderConfirmDialog():null)}}]),t}(a.Component),ga=Object(i.b)(function(e,t){return{currentTab:_a(e),isDeleting:fa(e),commentingOrderId:Ea(e),comment:ba(e),stars:va(e)}},function(e,t){return{userActions:Object(E.b)(sa,e)}})(ya),ja=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleSetCurrentTab=function(e){n.props.userActions.setCurrentTab(e)},n.handleBack=function(){n.props.history.push("/")},n.handleLogout=function(){n.props.loginActions.logout()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.orders;e.currentTab;return r.a.createElement("div",null,r.a.createElement(Ln,{onBack:this.handleBack,onLogout:this.handleLogout}),r.a.createElement(ga,{data:t}))}},{key:"componentDidMount",value:function(){this.props.userActions.loadOrders()}}]),t}(a.Component),Na=Object(i.b)(function(e,t){return{orders:ha(e)}},function(e,t){return{userActions:Object(E.b)(sa,e),loginActions:Object(E.b)(Xt,e)}})(ja),Ca=(n(96),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.appActions.clearError;return r.a.createElement("div",{className:"APP"},r.a.createElement(_.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/detail/:id",component:et}),r.a.createElement(un,{path:"/user",component:Na}),r.a.createElement(f.b,{path:"/search",component:Ht}),r.a.createElement(f.b,{path:"/search_result",component:Kt}),r.a.createElement(f.b,{path:"/login",component:sn}),r.a.createElement(un,{path:"/purchase/:id",component:Hn}),r.a.createElement(f.b,{path:"/",component:ke}))),t?r.a.createElement(h,{msg:t,clearError:n}):null)}}]),t}(a.Component)),wa=Object(i.b)(function(e){return{error:g(e)}},function(e){return{appActions:Object(E.b)(O,e)}})(Ca),ka=n(36),Ta=Object(E.c)({comments:xn,products:re,orders:fn,shops:Le,keywords:st}),Sa=Object(E.c)({entities:Ta,home:Ce,detail:Ze,app:j,search:kt,login:tn,user:da,purchase:In}),Ia=Object(E.d)(Sa,Object(E.a)(ka.a,function(e){return function(e){return function(t){if(void 0===t.FETCH_DATA)return e(t);var n=t.FETCH_DATA,a=n.types,r=n.schema,c=n.endpoint;if("string"!==typeof c)throw new Error("endpoint\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684URL");if(!r)throw new Error("\u5fc5\u987b\u6307\u5b9aschema");if(!Array.isArray(a)||3!==a.length)throw new Error("\u5fc5\u987b\u6307\u5b9a\u6570\u7ec4types\u4e14\u957f\u5ea6\u4e3a3");if(!a.every(function(e){return"string"===typeof e}))throw new Error("action type\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b");var s=function(e){var n=Object(v.a)({},t,e);return delete n.FETCH_DATA,n},i=Object(ce.a)(a,3),o=i[0],l=i[1],u=i[2];return console.log("dispatch request"),e(s({type:o})),oe(c,r).then(function(t){console.log("dispatch success"),e(s({type:l,response:t}))}).catch(function(t){e(s({type:u,error:t.message||"\u83b7\u53d6\u6570\u636e\u5931\u8d25"}))})}}}));n(97);s.a.render(r.a.createElement(i.a,{store:Ia},r.a.createElement(wa,null)),document.getElementById("root"))}]),[[39,1,2]]]);
//# sourceMappingURL=main.45d16dd2.chunk.js.map